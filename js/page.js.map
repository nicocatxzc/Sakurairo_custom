{"version":3,"file":"page.js","mappings":"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","sources":["webpack://sakurairo-scripts/./src/page/artile_attachment/index.ts","webpack://sakurairo-scripts/./src/page/artile_attachment/math.ts","webpack://sakurairo-scripts/./src/page/gravatar.ts","webpack://sakurairo-scripts/./src/page/getqqinfo.js","webpack://sakurairo-scripts/./src/page/AddComment.ts","webpack://sakurairo-scripts/./src/page/pagination.ts","webpack://sakurairo-scripts/./src/page/emoji.js","webpack://sakurairo-scripts/./src/page/annotation.js","webpack://sakurairo-scripts/./src/page/link_form.js","webpack://sakurairo-scripts/./src/page/steam_card.js","webpack://sakurairo-scripts/./src/page/ghcard_theme.js","webpack://sakurairo-scripts/./src/page/time_archive.js","webpack://sakurairo-scripts/./src/page/bili_fav.js","webpack://sakurairo-scripts/./src/page/comment_captcha.js","webpack://sakurairo-scripts/./src/page/index.js","webpack://sakurairo-scripts/./node_modules/.pnpm/@mui+utils@6.1.1_react@18.2.0/node_modules/@mui/utils/esm/debounce/debounce.js","webpack://sakurairo-scripts/./node_modules/.pnpm/charenc@0.0.2/node_modules/charenc/charenc.js","webpack://sakurairo-scripts/./node_modules/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js","webpack://sakurairo-scripts/./src/page/global-func.js","webpack://sakurairo-scripts/./node_modules/.pnpm/md5@2.3.0/node_modules/md5/md5.js","webpack://sakurairo-scripts/./node_modules/.pnpm/crypt@0.0.2/node_modules/crypt/crypt.js"],"sourcesContent":["import { loadCSS } from 'fg-loadcss';\nimport { slideToggle } from '../../common/util';\nimport { resolvePath, importExternal } from '../../common/npmLib';\nimport math from './math';\nfunction collapse() {\n    //\n    /* jQuery(document).ready(\n    function(jQuery){\n        jQuery('.collapseButton').click(function(){\n        jQuery(this).parent().parent().find('.xContent').slideToggle('slow');\n        });\n        }) */\n    const collapseButtons = document.getElementsByClassName('collapseButton');\n    if (collapseButtons.length > 0) {\n        const collapseListener = (e) => {\n            slideToggle(e.currentTarget.nextElementSibling);\n        };\n        for (const ele of collapseButtons) {\n            ele.addEventListener(\"click\", collapseListener);\n        }\n        // import('jquery').then(({ default: jQuery }) => {\n        //     jQuery('.collapseButton').on(\"click\", function () {\n        //         jQuery(this).parent().parent().find('.xContent').slideToggle('slow');\n        //     })\n        // })\n    }\n}\nlet lightBoxCSS;\nasync function lightbox() {\n    //init lightbox\n    if (_iro.baguetteBox) {\n        if (!lightBoxCSS)\n            lightBoxCSS = loadCSS(resolvePath('dist/baguetteBox.min.css', 'baguettebox.js', '1.11.1'));\n        //@ts-ignore\n        const { default: baguetteBox } = await import('baguettebox.js');\n        baguetteBox.run('.entry-content', {\n            captions: function (element) {\n                return element.getElementsByTagName('img')[0].alt;\n            },\n            ignoreClass: 'fancybox',\n        });\n    }\n    else if (_iro.fancybox) {\n        if (!lightBoxCSS)\n            lightBoxCSS = loadCSS(resolvePath('dist/jquery.fancybox.min.css', '@fancyapps/fancybox'));\n        if (!((window.jQuery instanceof Function) || (window.$ instanceof Function))) {\n            if (_iro.ext_shared_lib) {\n                importExternal('dist/jquery.slim.min.js', 'jquery');\n            }\n            else {\n                //@ts-ignore\n                const { default: jQuery } = await import('jquery');\n                window.$ = jQuery;\n                window.jQuery = jQuery;\n            }\n        }\n        if (_iro.ext_shared_lib) {\n            importExternal('dist/jquery.fancybox.min.js', '@fancyapps/fancybox');\n        }\n        else {\n            //@ts-ignore\n            import('@fancyapps/fancybox');\n        }\n    }\n    else if (_iro.lightGallery) {\n        //lightGalleryumd\n        /*         if (_iro.ext_shared_lib) {\n                    if (!window.lightGallery) {\n                        loadCSS(resolvePath('css/lightgallery-bundle.min.css', 'lightgallery', '2.3.0'))\n                        await importExternal('lightgallery.umd.js', 'lightgallery')\n                    }\n                    const { plugins } = _iro.lightGallery\n                    if (plugins) {\n                        (await Promise\n                            .allSettled(\n                                plugins.map((name: string) => importExternal('plugins/' + solvePluginName(name)+'.umd.js', 'lightgallery'))\n                            ))\n                            .map(handleResult)\n                    }\n                    window.lightGallery(\n                        document.querySelector('.entry-content'),\n                        _iro.lightGallery);\n                } else {\n                    //@ts-ignore\n                    const { default: initLightGallery } = await import('./lightGallery/import')\n                    initLightGallery()\n                } */\n        const { default: initLightGallery } = await import('../lightGallery/import');\n        initLightGallery();\n    }\n}\nexport default function article_attach() {\n    collapse();\n    lightbox();\n    math();\n}\n","import { resolvePath } from '../../common/npmLib';\nexport default async function math() {\n    if (_iro.theme_mathjax &&\n        (document.getElementsByTagName('math').length > 0 ||\n            document.querySelector('article > div.entry-content')?.textContent.match(/(?:\\$|\\\\\\(|\\\\\\[|\\\\begin\\{.*?})/))) {\n        if (!('MathJax' in window)) {\n            const mathjaxConfig = {\n                tex: {\n                    inlineMath: [['$', '$'], ['\\\\(', '\\\\)']]\n                },\n                startup: {\n                    typeset: false, // Perform initial typeset?\n                },\n                chtml: {\n                    fontURL: resolvePath('es5/output/chtml/fonts/woff-v2', 'mathjax'),\n                    mathmlSpacing: true // true for MathML spacing rules, false for TeX rules\n                }\n            };\n            //@ts-ignore\n            window.MathJax = mathjaxConfig;\n        }\n        //@ts-ignore\n        await import('mathjax/es5/tex-mml-chtml');\n        //@ts-ignore\n        window.MathJax.typesetPromise();\n    }\n}\n","import MD5 from 'md5';\n/**\n * Gravatar\n * from a6cd66c 11.third-part-functions.js\n */\nexport const get_gravatar = (email, size = 80) => 'https://' + _iro.gravatar_url + '/' + MD5(email) + '.jpg?s=' + size + '&d=mm';\n","import { buildAPI } from '../common/util'\nimport { get_gravatar } from './gravatar'\n\nexport default function getqqinfo() {\n    let is_get_by_qq = false;\n    const i_author = document.querySelector(\"input#author\"),\n        i_qq = document.querySelector(\"input#qq\"),\n        i_email = document.querySelector(\"input#email\"),\n        i_url = document.querySelector(\"input#url\"),\n        qq_check = document.querySelector(\".qq-check\"),\n        gravatar_check = document.querySelector(\".gravatar-check\"),\n        user_avatar_img = document.querySelector(\"div.comment-user-avatar img\");\n    if (i_author == null) return;\n    if (!localStorage.getItem('user_qq') && !localStorage.getItem('user_qq_email') && !localStorage.getItem('user_author')) {\n        i_qq.value = i_author.value = i_email.value = i_url.value = \"\";\n    }\n    if (localStorage.getItem('user_avatar') && localStorage.getItem('user_qq') && localStorage.getItem('user_qq_email')) {\n        user_avatar_img.setAttribute('src', localStorage.getItem('user_avatar'));\n        i_author.value = localStorage.getItem('user_author');\n        i_email.value = localStorage.getItem('user_qq') + '@qq.com';\n        i_qq.value = localStorage.getItem('user_qq');\n        if (_iro.qzone_autocomplete) {\n            i_url.value = 'https://user.qzone.qq.com/' + localStorage.getItem('user_qq');\n        }\n        if (i_qq.value) {\n            qq_check.style.display = \"block\";\n            gravatar_check.style.display = \"none\";\n        }\n    }\n    let emailAddressFlag = i_email.value;\n    //var emailAddressFlag = cached.filter('#email').val();\n    i_author.addEventListener('blur', () => {\n        // })\n        //cached.filter('#author').on('blur', function () {\n        const qq = i_author.value,\n            reg_QQ = /^[1-9]\\d{4,9}$/;\n        if (reg_QQ.test(qq)) {\n            const whileFailed = () => {\n                i_qq.value = '';\n                qq_check.style.display = 'none';\n                gravatar_check.style.display = 'block';\n                user_avatar_img.setAttribute('src', get_gravatar(i_email.value, 80));\n                localStorage.setItem('user_qq', '');\n                localStorage.setItem('user_email', i_email.value);\n                localStorage.setItem('user_avatar', get_gravatar(i_email.value, 80));\n                /***/\n                /*         qq.value = email.value = url.value = \"\";\n                        if (!qq.value) {\n                            qq_check.style.display = 'none';\n                            gravatar_check.style.display = 'block';\n                            setCookie('user_qq', '', 30);\n                            user_avatar_img.setAttribute('src', get_gravatar(email.value, 80));\n                            setCookie('user_avatar', get_gravatar(email.value, 80), 30);\n                        } */\n            }\n            fetch(buildAPI(_iro.qq_api_url, { qq: qq }))\n                .then(async resp => {\n                    if (resp.ok) {\n                        //success\n                        try {\n                            const data = await resp.json()\n                            i_author.value = data.name;\n                            i_email.value = qq.trim() + '@qq.com';\n                            if (_iro.qzone_autocomplete) {\n                                i_url.value = 'https://user.qzone.qq.com/' + qq.trim();\n                            }\n                            user_avatar_img.setAttribute('src', 'https://q2.qlogo.cn/headimg_dl?dst_uin=' + qq + '&spec=100');\n                            is_get_by_qq = true;\n                            i_qq.value = qq.trim();\n                            if (i_qq.value) {\n                                qq_check.style.display = 'block';\n                                gravatar_check.style.display = 'none';\n                            }\n                            localStorage.setItem('user_author', data.name);\n                            localStorage.setItem('user_qq', qq);\n                            localStorage.setItem('is_user_qq', 'yes');\n                            localStorage.setItem('user_qq_email', qq + '@qq.com');\n                            localStorage.setItem('user_email', qq + '@qq.com');\n                            emailAddressFlag = i_email.value;\n                            /***/\n                            user_avatar_img.setAttribute('src', data.avatar);\n                            localStorage.setItem('user_avatar', data.avatar);\n                        } catch (e) {\n                            console.warn(e)\n                            whileFailed()\n                        }\n                    } else {\n                        whileFailed()\n                    }\n                })\n        }\n    });\n    if (localStorage.getItem('user_avatar') && localStorage.getItem('user_email') && localStorage.getItem('is_user_qq') == 'no' && !localStorage.getItem('user_qq_email')) {\n        user_avatar_img.setAttribute(\"src\", localStorage.getItem('user_avatar'));\n        i_email.value = localStorage.getItem('user_mail');\n        i_qq.value = '';\n        if (!i_qq.value) {\n            qq_check.style.display = \"none\";\n            gravatar_check.style.display = \"block\";\n        }\n        // $('div.comment-user-avatar img').attr('src', getCookie('user_avatar'));\n        // cached.filter('#email').val(getCookie('user_email'));\n        // cached.filter('#qq').val('');\n        // if (!cached.filter('#qq').val()) {\n        //     $('.qq-check').css('display', 'none');\n        //     $('.gravatar-check').css('display', 'block');\n        // }\n    }\n    i_email.addEventListener(\"blur\", function () {\n        //cached.filter('#email').on('blur', function () {\n        let emailAddress = i_email.value;\n        // var emailAddress = cached.filter('#email').val();\n        if ((is_get_by_qq == false || emailAddressFlag != emailAddress) && emailAddress != '') {\n            user_avatar_img.setAttribute(\"src\", get_gravatar(emailAddress, 80));\n            //$('div.comment-user-avatar img').attr('src', get_gravatar(emailAddress, 80));\n            localStorage.setItem('user_avatar', get_gravatar(emailAddress, 80));\n            localStorage.setItem('user_email', emailAddress);\n            localStorage.setItem('user_qq_email', '');\n            localStorage.setItem('is_user_qq', 'no');\n            i_qq.value = '';\n            // cached.filter('#qq').val('');\n            if (!i_qq.value) {\n                qq_check.style.display = \"none\";\n                gravatar_check.style.display = \"block\";\n                // $('.qq-check').css('display', 'none');\n                // $('.gravatar-check').css('display', 'block');\n            }\n        }\n    });\n    if (localStorage.getItem('user_url')) {\n        i_url.value = localStorage.getItem(\"user_url\");\n        // cached.filter('#url').val(getCookie('user_url'));\n    }\n    i_url.addEventListener(\"blur\", function () {\n        //cached.filter('#url').on('blur', function () {\n        let URL_Address = i_url.value;\n        i_url.value = URL_Address;\n        // var URL_Address = cached.filter('#url').val();\n        // cached.filter('#url').val(URL_Address);\n        localStorage.setItem('user_url', URL_Address);\n    });\n    if (localStorage.getItem('user_author')) {\n        i_author.value = localStorage.getItem('user_author');\n        // cached.filter('#author').val(getCookie('user_author'));\n    }\n    i_author.addEventListener(\"blur\", function () {\n        // cached.filter('#author').on('blur', function () {\n        let user_name = i_author.value;\n        i_author.value = user_name;\n        // var user_name = cached.filter('#author').val();\n        // cached.filter('#author').val(user_name);\n        localStorage.setItem('user_author', user_name);\n    });\n}","const AddComment = {\n    respondId: '',\n    moveForm: function (commId, parentId, respondId) {\n        const comm = document.getElementById(commId), respond = document.getElementById(respondId), cancel = document.getElementById('cancel-comment-reply-link'), parent = document.getElementById('comment_parent');\n        //post = document.getElementById('comment_post_ID');\n        this.respondId = respondId;\n        if (!document.getElementById('wp-temp-form-div')) {\n            const div = document.createElement('div');\n            div.id = 'wp-temp-form-div';\n            div.style.display = 'none';\n            respond.parentNode.insertBefore(div, respond);\n        }\n        if (!comm) {\n            const temp = document.getElementById('wp-temp-form-div');\n            document.getElementById('comment_parent').value = '0';\n            temp.parentNode.insertBefore(respond, temp);\n            temp.remove();\n        }\n        else {\n            comm.parentNode.insertBefore(respond, comm.nextSibling);\n        }\n        const _respond = document.getElementById(\"respond\");\n        window.scrollTo({\n            top: _respond.getBoundingClientRect().top + window.pageYOffset - _respond.clientTop - 100,\n            behavior: \"smooth\"\n        });\n        parent.value = parentId;\n        cancel.style.display = '';\n        cancel.onclick = function (e) {\n            const t = AddComment, temp = document.getElementById('wp-temp-form-div'), respond = document.getElementById(t.respondId);\n            document.getElementById('comment_parent').value = '0';\n            if (temp && respond) {\n                temp.parentNode.insertBefore(respond, temp);\n                temp.remove();\n                //temp.parentNode.removeChild(temp);\n            }\n            this.style.display = 'none';\n            this.onclick = null;\n            return false;\n        };\n        try {\n            document.getElementById('comment').focus();\n        }\n        catch (e) { }\n        return false;\n    },\n};\nexport default AddComment;\n","import { createButterbar } from \"../common/butterbar\";\nimport lazyload from \"../common/lazyload\";\nconst PaginationListener = (e) => {\n    const target = e.target;\n    if (target === document.querySelector(\"#template-pagination a\")) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (target.classList.contains(\"loading\"))\n            return;\n        target.classList.add(\"loading\");\n        target.textContent = \"\";\n        fetch(target.dataset.href + \"&_wpnonce=\" + _iro.nonce, {\n            method: \"POST\"\n        })\n            .then(async (res) => {\n            const data = await res.json();\n            if (res.ok) {\n                document.getElementById(\"template-pagination\").remove();\n                document.querySelector(\".row\").insertAdjacentHTML('beforeend', data);\n                //@ts-ignore\n                lazyload();\n            }\n            else {\n                throw Error(`Error, Status: ${res.status}`);\n            }\n        })\n            .catch(e => {\n            console.error(e);\n            createButterbar(e);\n            target.classList.remove(\"loading\");\n            target.innerHTML = '<i class=\"fa-solid fa-triangle-exclamation\"></i> ERROR ';\n        });\n    }\n};\nexport default function LoadNextPage() {\n    const sections = document.getElementsByTagName(\"section\");\n    let _flag = false;\n    for (let i = 0; i < sections.length; i++) {\n        if (sections[i].classList.contains(\"have-columns\")) {\n            _flag = true;\n            break;\n        }\n    }\n    if (_flag) {\n        document.addEventListener('click', PaginationListener);\n    }\n}\n","import initFooter from \"../app/footer\"\n\nexport default function prepareEmoji() {\n    const emojiPanelButton = document.getElementById('emotion-toggle');\n    const emojiPanel = document.querySelector('.emotion-box');\n    const header = document.querySelector('.emotion-header');\n    const commentTextArea = document.querySelector('.comment-textarea');\n\n    if (!emojiPanelButton) {\n        document.removeEventListener('click', closeEmojiPanel );\n        document.removeEventListener('mousemove', moveDrag);\n        document.removeEventListener('mouseup', endDrag);\n        document.removeEventListener('touchmove', moveDrag);\n        document.removeEventListener('touchend', endDrag);\n        if (header) {\n            header.removeEventListener('touchstart', startDrag);\n            header.removeEventListener('mousedown', startDrag);\n        }\n        return\n    }\n\n    if (emojiPanelButton) {\n        emojiPanelButton.addEventListener('click', openEmoji);\n    }\n\n    function openEmoji() {\n        if (!emojiPanel) return;\n      \n        // \n        const dragged = emojiPanel.getAttribute('dragged');\n      \n        if (!dragged) {\n            const btnRect = emojiPanelButton.getBoundingClientRect();\n            const panelWidth = emojiPanel.offsetWidth;\n            const panelHeight = emojiPanel.offsetHeight;\n\n            let leftPos = btnRect.left + window.scrollX + (btnRect.width / 2) - (panelWidth / 2);\n            const isFixed = window.getComputedStyle(emojiPanel).position === \"fixed\";\n            // let topPos = isFixed ? (btnRect.top - panelHeight) : (btnRect.top - panelHeight + window.scrollY);\n\n            let topPos = btnRect.bottom;\n            // \n            if (topPos + panelHeight > window.innerHeight) {\n                topPos = btnRect.top - panelHeight;\n            }\n\n            emojiPanel.style.left = `${leftPos}px`;\n            emojiPanel.style.top = `${topPos}px`;\n        }\n      \n        // \n        if (emojiPanel.classList.contains(\"open\")) {\n            emojiPanel.classList.toggle('open');\n            initFooter(\"check\");\n        } else {\n            emojiPanel.classList.toggle('open');\n            initFooter(\"hide\");\n        }\n      \n        // \n        if (!emojiPanel.hasAttribute('initialized')) {\n            initEmojiPanel();\n            emojiPanel.setAttribute('initialized', 'true'); // \n        }\n      }\n\n    function initEmojiPanel() {\n        if (!emojiPanel || !header) return;\n        \n        // \n        header.addEventListener('mousedown', startDrag);\n        document.addEventListener('mousemove', moveDrag);\n        document.addEventListener('mouseup', endDrag);\n        \n        // \n        header.addEventListener('touchstart', startDrag, { passive: false });\n        document.addEventListener('touchmove', moveDrag, { passive: false });\n        document.addEventListener('touchend', endDrag);\n        \n        // \n        if (emojiPanelButton) {\n            document.addEventListener('click', closeEmojiPanel );\n        }\n    }\n\n    // \n    function closeEmojiPanel (e) {\n        const target = e.target;\n        if (\n            !emojiPanel.contains(target) && \n            !emojiPanelButton.contains(target) &&\n            !commentTextArea.contains(target) ) \n        {\n            if (emojiPanel.classList.contains(\"open\")) {\n                emojiPanel.classList.remove('open');\n                initFooter(\"check\");\n            }\n        }\n    }\n\n    let offsetX = 0, offsetY = 0, isDragging = false;\n      \n    function startDrag(e) {\n        isDragging = true;\n        const event = (e).touches ? (e).touches[0] : (e);\n        offsetX = event.clientX - emojiPanel.offsetLeft;\n        offsetY = event.clientY - emojiPanel.offsetTop;\n        emojiPanel.style.transition = \"none\"; // \n    \n        if ((e).touches) e.preventDefault();\n    }\n    \n    function moveDrag(e) {\n        if (!isDragging) return;\n        const event = (e).touches ? (e).touches[0] : (e);\n        const left = event.clientX - offsetX;\n        const top = event.clientY - offsetY;\n        emojiPanel.style.left = `${left}px`;\n        emojiPanel.style.top = `${top}px`;\n        emojiPanel.setAttribute('dragged', 'true'); // \n    \n        if ((e).touches) e.preventDefault();\n    }\n    \n    function endDrag() {\n        isDragging = false;\n        emojiPanel.style.transition = \"\";\n    }\n\n    const row = document.querySelector('.emotion-box>table tr')\n    if (!row) return\n\n    //\n    row.addEventListener('click', (e) => {\n        if ((e.target).tagName === 'TH') {\n            for (const element of row.querySelectorAll('th')) {\n                const match = element.className.match(/(\\S+)-bar/);\n                if (!match) return;\n                /** @type {HTMLElement|null} */\n                const container = document.querySelector(`.${match[1]}-container`);\n                if (element === e.target) {\n                    element.classList.add('on-hover')\n                    container.style.display = 'block'\n                } else {\n                    element.classList.remove('on-hover')\n                    container.style.display = 'none'\n                }\n            }\n        }\n    })\n}\n","// \nexport default function initAnnotations() {\n    createAnnotationPopup();\n    \n    // \n    if (!_iro.have_annotation) return;\n    \n    if (typeof _iro.page_annotation === 'string') {\n        _iro.page_annotation = JSON.parse(_iro.page_annotation);\n    }        \n    \n    if (!_iro.page_annotation || Object.keys(_iro.page_annotation).length === 0) {\n        return;\n    }\n    \n    // \n    let annotationMarks = document.querySelectorAll('.iro-term-annotation');\n    const processedTerms = new Set(); // \n\n    // \n    annotationMarks.forEach(mark => {\n        const term = mark.getAttribute('data-term');\n\n        // \n        if (term && !processedTerms.has(term)) {\n            mark.addEventListener('click', function(event) {\n                event.preventDefault();\n                event.stopPropagation();\n\n                if (_iro.page_annotation && _iro.page_annotation[term]) {\n                    let explanation = _iro.page_annotation[term];\n                    let popup = document.getElementById('iro-annotation-popup');\n\n                    popup.querySelector('.term').textContent = term;\n                    popup.querySelector('.explanation').textContent = explanation;\n\n                    let rect = this.getBoundingClientRect();\n                    popup.style.top = (window.pageYOffset + rect.bottom + 10) + 'px';\n                    popup.style.left = (rect.left - 50) + 'px'; // \n                    popup.style.display = 'block';\n                }\n            });\n            processedTerms.add(term); // \n        }\n    });\n    \n    // \n    document.addEventListener('click', function(event) {\n        let popup = document.getElementById('iro-annotation-popup');\n        //  popup \n        if (popup && popup.style.display === 'block' && !event.target.closest('.iro-term-annotation, .iro-annotation-popup')) {\n            popup.style.display = 'none';\n        }\n    });\n}\n\n// \nfunction createAnnotationPopup() {\n    let popup = document.getElementById('iro-annotation-popup');\n    if (popup) return popup;\n    \n    popup = document.createElement('div');\n    popup.id = 'iro-annotation-popup';\n    popup.className = 'iro-annotation-popup';\n    popup.innerHTML = '<span class=\"close\"></span><div class=\"term\"></div><div class=\"explanation\"></div>';\n    document.body.appendChild(popup);\n    \n    popup.querySelector('.close').addEventListener('click', function() {\n        popup.style.display = 'none';\n    });\n    \n    return popup;\n}","/**\n * \n * \n * \n */\n\n// \nimport initFooter from \"../app/footer\"\n\nfunction i18n_form() {\n    let sakura_links = {\n        // \n        'zh_CN': {\n            // \n            submitting: '...',\n\n            // \n            server_error: '',\n            connection_error: '',\n            timeout_error: '',\n\n            // \n            invalid_url: '',\n            invalid_email: '',\n            security_error: '',\n\n            // \n            captcha_load_error: '',\n            refresh_captcha: ''\n        },\n\n        // \n        'zh_TW': {\n            // \n            submitting: '...',\n\n            // \n            server_error: '',\n            connection_error: '',\n            timeout_error: '',\n\n            // \n            invalid_url: '',\n            invalid_email: '',\n            security_error: '',\n\n            // \n            captcha_load_error: '',\n            refresh_captcha: ''\n        },\n\n        // \n        'ja': {\n            // \n            submitting: '...',\n\n            // \n            server_error: '',\n            connection_error: '',\n            timeout_error: '',\n\n            // \n            invalid_url: 'URL',\n            invalid_email: '',\n            security_error: '',\n\n            // \n            captcha_load_error: '',\n            refresh_captcha: ''\n        }\n    };\n\n    // \n    let currentLang = 'zh_CN';\n    try {\n        // \n        if (_iro.language) {\n            currentLang = _iro.language;\n        }\n        // HTML\n        else if (document.documentElement.lang) {\n            let htmlLang = document.documentElement.lang;\n            currentLang = htmlLang.replace(/-/g, '_');\n        }\n    } catch (e) {\n        // \n    }\n\n    let validLangs = ['zh_CN', 'zh_TW', 'ja'];\n    let lang = validLangs.includes(currentLang) ? currentLang : 'zh_CN';\n    let i18n = sakura_links[lang] || sakura_links['zh_CN'];\n\n    return i18n;\n}\n\n// PJAX\nexport default function initLinkSubmission() {\n\n    let i18n = i18n_form();\n    let submitButton = document.getElementById('openLinkModal');\n    let linkModal = document.getElementById('linkModal');\n    let closeButton = document.querySelector('.link-modal-close');\n    let linkForm = document.getElementById('linkSubmissionForm');\n    let captchaImg = document.getElementById('captchaImg');\n\n    // \n    if (!linkForm || !submitButton || !linkModal || !closeButton || !captchaImg) {\n        if (!linkForm) { // \n            document.removeEventListener('pjax:complete', initLinkSubmission);\n        }\n        return;\n    }\n\n    let patternTitle = document.querySelector('.pattern-header span'); // \n    if (patternTitle) { // \n        patternTitle.parentNode.insertBefore(submitButton, patternTitle.nextElementSibling);\n    }\n\n    // \n    submitButton.addEventListener('click', handleModalOpen); // \n    closeButton.addEventListener('click', handleModalClose); // \n    document.addEventListener('mousedown', handleOutsideClick); // \n    captchaImg.addEventListener('click', loadCaptcha);\n\n    // \n    document.addEventListener('pjax:complete', cleanup);\n    function cleanup() {\n        // \n        submitButton.removeEventListener('click', handleModalOpen);\n        closeButton.removeEventListener('click', handleModalClose);\n        document.removeEventListener('mousedown', handleOutsideClick);\n        captchaImg.removeEventListener('click', loadCaptcha);\n\n        linkForm.removeEventListener('submit', handleFormSubmit);\n\n        enableScroll();\n        document.removeEventListener('pjax:complete', cleanup); // \n    };\n\n    function handleModalOpen(e) { // \n        e.preventDefault();\n        disableScroll();\n        initFooter(\"hide\");\n        linkModal.style.display = 'flex';\n        loadCaptcha();\n    }\n\n    function handleModalClose() { // \n        enableScroll();\n        initFooter(\"check\");\n        linkModal.style.display = 'none';\n    }\n\n    function handleOutsideClick(e) { // \n        if (e.target === linkModal) {\n            linkModal.style.display = 'none';\n            initFooter(\"check\");\n            enableScroll();\n        }\n    }\n\n    // \n    function disableScroll() {\n        document.documentElement.style.overflow = 'hidden';\n    }\n\n    function enableScroll() {\n        document.documentElement.style.overflowY = 'unset';\n    }\n\n    // \n    let isSubmitting = false;\n    let submissionTimeout = null;\n    let submissionLock = false; // \n\n    // \n    linkForm.addEventListener('submit', handleFormSubmit);\n\n    // \n    async function handleFormSubmit(e) {\n        e.preventDefault();\n\n        //  - \n        if (isSubmitting || submissionLock) {\n            console.log('');\n            return;\n        }\n\n        // \n        submissionLock = true;\n\n        // UI\n        await new Promise(resolve => setTimeout(resolve, 50));\n\n        try {\n            // \n            clearTimeout(submissionTimeout);\n\n            //\n            isSubmitting = true;\n\n            // \n            if (!validateForm()) {\n                isSubmitting = false;\n                submissionLock = false;\n                return;\n            }\n\n            // \n            let submitButton = linkForm.querySelector('.link-form-submit');\n            if (submitButton) {\n                submitButton.disabled = true;\n            }\n\n            displayStatus('info', i18n.submitting);\n\n            // \n            let formData = new FormData(linkForm);\n            formData.append('action', 'link_submission');\n\n            let ajaxUrl = _iro.ajaxurl;\n\n            // \n            let fetchPromise = fetch(ajaxUrl, {\n                method: 'POST',\n                body: formData,\n                credentials: 'same-origin'\n            });\n            let timeoutPromise = new Promise((_, reject) => {\n                submissionTimeout = setTimeout(() => {\n                    reject(new Error(i18n.timeout_error));\n                }, 15000);\n            });\n\n            let response = await Promise.race([fetchPromise, timeoutPromise]);\n            clearTimeout(submissionTimeout);\n\n            if (!response.ok) {\n                throw new Error(`${i18n.server_error} ${response.status}`);\n            }\n\n            // \n            let text = await response.text();\n            let data;\n            try {\n                data = JSON.parse(text);\n            } catch (e) {\n                throw new Error('JSON');\n            }\n\n            // \n            if (data.success) {\n                displayStatus('success', data.data.message);\n                linkForm.reset();\n            } else {\n                displayStatus('error', data.data.message);\n                loadCaptcha();\n            }\n        } catch (error) {\n            displayStatus('error', error.message || i18n.connection_error);\n            loadCaptcha();\n        } finally {\n            // \n            isSubmitting = false;\n            const submitButton = linkForm.querySelector('.link-form-submit');\n            if (submitButton) {\n                submitButton.disabled = false;\n            }\n            // \n            setTimeout(() => {\n                submissionLock = false;\n            }, 1000);\n        }\n    }\n}\n\n// \nfunction validateForm() {\n    let i18n = i18n_form(); // \n    let siteName = document.getElementById('siteName');\n    let siteUrl = document.getElementById('siteUrl');\n    let siteDescription = document.getElementById('siteDescription');\n    let siteImage = document.getElementById('siteImage');\n    let contactEmail = document.getElementById('contactEmail');\n    let captcha = document.getElementById('yzm');\n    let timestampInput = document.getElementById('timestamp');\n    let idInput = document.getElementById('captchaId');\n    let nonceInput = document.querySelector('input[name=\"link_submission_nonce\"]');\n\n    // \n    if (!siteName || !siteUrl || !siteDescription || !siteImage || !contactEmail || !captcha || !timestampInput || !idInput || !nonceInput.value) {\n        displayStatus('error', i18n.security_error);\n        return false;\n    }\n\n    if (!timestampInput.value || !idInput.value) {\n        displayStatus('error', i18n.captcha_load_error);\n        return false;\n    }\n\n    // URL - httphttps\n    let siteUrlValue = siteUrl.value.trim();\n    if (!/^https?:\\/\\//i.test(siteUrlValue)) {\n        siteUrlValue = 'https://' + siteUrlValue;\n        siteUrl.value = siteUrlValue;\n    }\n\n    let urlPattern = /^https?:\\/\\/([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}(:\\d+)?(\\/[^\\s]*)?$/;\n    if (!urlPattern.test(siteUrlValue)) {\n        displayStatus('error', i18n.invalid_url);\n        return false;\n    }\n\n    // URL - httphttps\n    let siteImageValue = siteImage.value.trim();\n    if (!/^https?:\\/\\//i.test(siteImageValue)) {\n        siteImageValue = 'https://' + siteImageValue;\n        siteImage.value = siteImageValue;\n    }\n\n    if (!urlPattern.test(siteImageValue)) {\n        displayStatus('error', i18n.invalid_url);\n        return false;\n    }\n\n    // \n    let emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailPattern.test(contactEmail.value.trim())) {\n        displayStatus('error', i18n.invalid_email);\n        return false;\n    }\n\n    // XSS - \n    let xssPattern = /<script[^>]*>[\\s\\S]*?<\\/script>|<[^>]*on\\w+\\s*=|javascript:|data:/i;\n    if (\n        xssPattern.test(siteName.value) ||\n        xssPattern.test(siteDescription.value) ||\n        xssPattern.test(siteUrlValue) ||\n        xssPattern.test(siteImageValue) ||\n        xssPattern.test(contactEmail.value)\n    ) {\n        displayStatus('error', i18n.security_error);\n        return false;\n    }\n\n    return true;\n}\n\n// \nfunction loadCaptcha() {\n    let i18n = i18n_form(); // \n    let captchaImg = document.getElementById('captchaImg');\n    let captchaInput = document.getElementById('yzm');\n    let timestampInput = document.getElementById('timestamp');\n    let idInput = document.getElementById('captchaId');\n\n    // \n    if (!captchaImg || !captchaInput || !timestampInput || !idInput) {\n        return;\n    }\n\n    // \n    captchaImg.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMCIgaGVpZ2h0PSIzMCIgdmlld0JveD0iMCAwIDM4IDM4IiBzdHJva2U9IiM2NjYiPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgc3Ryb2tlLXdpZHRoPSIyIj48Y2lyY2xlIHN0cm9rZS1vcGFjaXR5PSIuMyIgY3g9IjE4IiBjeT0iMTgiIHI9IjE4Ii8+PHBhdGggZD0iTTM2IDE4YzAtOS45NC04LjA2LTE4LTE4LTE4Ij48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCAxOCAxOCIgdG89IjM2MCAxOCAxOCIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz48L3BhdGg+PC9nPjwvZz48L3N2Zz4=';\n    captchaInput.value = '';\n\n    // API\n    let endpointUrl = _iro.captcha_endpoint || '';\n    if (!endpointUrl) {\n        displayStatus('error', i18n.captcha_load_error);\n        return;\n    }\n\n    // \n    let timestamp = Date.now();\n    let endpoint = endpointUrl + (endpointUrl.includes('?') ? '&' : '?') + 't=' + timestamp;\n\n    fetch(endpoint, {\n        method: 'GET',\n        credentials: 'same-origin',\n        cache: 'no-store',\n        headers: {\n            'Accept': 'application/json'\n        }\n    })\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(i18n.captcha_load_error);\n            }\n            return response.text();\n        })\n        .then(responseText => {\n            try {\n                let data = JSON.parse(responseText);\n\n                // APIcode0API\n                if (data.code !== undefined && data.code !== 0) {\n                    throw new Error(data.msg || i18n.captcha_load_error);\n                }\n\n                // \n                if (!data.data || !data.id || !data.time) {\n                    throw new Error(i18n.captcha_load_error);\n                }\n\n                // \n                captchaImg.src = data.data;\n                captchaImg.classList.remove('error');\n\n                // ID\n                timestampInput.value = String(data.time);\n                idInput.value = String(data.id);\n            } catch (e) {\n                throw new Error(i18n.captcha_load_error);\n            }\n        })\n        .catch(error => {\n            captchaImg.classList.add('error');\n            captchaImg.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNlNzRjM2MiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCI+PC9jaXJjbGU+PGxpbmUgeDE9IjE1IiB5MT0iOSIgeDI9IjkiIHkyPSIxNSI+PC9saW5lPjxsaW5lIHgxPSI5IiB5MT0iOSIgeDI9IjE1IiB5Mj0iMTUiPjwvbGluZT48L3N2Zz4=';\n            displayStatus('error', i18n.captcha_load_error);\n            setTimeout(loadCaptcha, 3000);\n        });\n}\n\n// \nfunction displayStatus(type, message) {\n    let statusElement = document.getElementById('formStatus');\n\n    if (!statusElement || !message) {\n        return;\n    }\n\n    // \n    if (window._statusUpdateTimeout) {\n        clearTimeout(window._statusUpdateTimeout);\n    }\n\n    // \n    window._statusUpdateTimeout = setTimeout(() => {\n        // XSS\n        let sanitizedMessage = message.replace(/[<>\"'&]/g, (c) => {\n            return { '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#39;', '&': '&amp;' }[c];\n        });\n\n        // \n        statusElement.className = 'form-status';\n        statusElement.classList.add(type === 'success' ? 'success-msg' : 'error-msg');\n        statusElement.textContent = sanitizedMessage;\n        statusElement.style.display = 'block';\n\n        // \n        if (type === 'success') {\n            setTimeout(() => {\n                if (statusElement) {\n                    statusElement.style.display = 'none';\n                }\n            }, 5000);\n        }\n    }, 50); // 50ms\n}\n\n// \ndocument.addEventListener('DOMContentLoaded', initLinkSubmission);\ndocument.addEventListener('pjax:complete', initLinkSubmission);","// \nlet defaultStyles = {\n    profile: {\n        display: 'block'\n    },\n    header: {\n        minWidth: '',\n        margin: '',\n        background: '',\n        borderBottom: '1px solid rgba(232, 232, 232, 0.8)',\n        padding: '16px'\n    },\n    username: {\n        fontSize: '18px'\n    },\n    avatar: {\n        width: '64px',\n        height: '64px'\n    }\n}\n\nexport default function init_steamCard() {\n    let steamProfiles = document.querySelectorAll('.steam-profile');\n    if (!steamProfiles) {\n        resize_SteamCard(false);\n        return;\n    } else {\n        applySteamProfileStyles();\n        resize_SteamCard(true);\n    }\n}\n\n// Steam\nfunction applySteamProfileStyles() {\n    let steamProfiles = document.querySelectorAll('.steam-profile');\n\n    steamProfiles.forEach(profile => {\n        // \n        let gameInfo = profile.querySelector('.steam-game-info');\n        let profileHeader = profile.querySelector('.steam-profile-header');\n        let username = profile.querySelector('.steam-username');\n        \n        // \n        let shouldApplyStyles = profile.offsetWidth > 700 && gameInfo;\n        \n        if (shouldApplyStyles) {\n            // \n            profile.style.display = 'flex';\n            \n            if (profileHeader) {\n                profileHeader.style.minWidth = '50%';\n                profileHeader.style.margin = '0 auto';\n                profileHeader.style.background = 'none';\n                profileHeader.style.borderBottom = 'unset';\n                profileHeader.style.padding = '24px';\n            }\n\n            if (username) {\n                username.style.fontSize = '30px';\n            }\n        } else {\n            // \n            profile.style.display = defaultStyles.profile.display;\n            \n            if (profileHeader) {\n                profileHeader.style.minWidth = defaultStyles.header.minWidth;\n                profileHeader.style.margin = defaultStyles.header.margin;\n                profileHeader.style.background = defaultStyles.header.background;\n                profileHeader.style.borderBottom = defaultStyles.header.borderBottom;\n                profileHeader.style.padding = defaultStyles.header.padding;\n            }\n\n            if (username) {\n                username.style.fontSize = defaultStyles.username.fontSize;\n            }\n\n        }\n    });\n}\n\n// \nfunction resize_SteamCard (init = false) {\n    let resizeTimer;\n    function resizeCard() {\n        clearTimeout(resizeTimer);\n        resizeTimer = setTimeout(applySteamProfileStyles, 250);\n    };\n    if (init) {\n        window.addEventListener('resize', resizeCard);\n    } else {\n        window.removeEventListener('resize', resizeCard);\n    }\n}\n    ","import {ifDarkmodeShouldOn} from '../app/darkmode'\n\nexport default function ghcardTheme(){\n    document.addEventListener('darkmode', (event) => { // darkmode.ts informDarkModeChange\n        let turn = event.detail;\n        ghcardDark(turn);\n    });\n    document.addEventListener('pjax:complete',function(){\n        checkDark()\n    })\n    checkDark()\n}\n\nfunction checkDark () {\n    const dark = localStorage.getItem(\"dark\")\n    if (!dark) {\n        if (ifDarkmodeShouldOn() && _iro.darkmode) {\n            ghcardDark(true);\n        } else {\n            ghcardDark(false);\n        }\n    } else {\n        if (dark == '1') {\n            ghcardDark(true);\n        } else {\n            ghcardDark(false);\n        }\n    }\n}\n\nfunction ghcardDark (turn = false) {\n    let cards = document.querySelectorAll('.ghcard');\n    if (!cards) return;\n    cards.forEach((ghcard) => {\n        let card = ghcard.querySelector('img')\n        if (!card) return;\n        let src = new URL(card.src)\n        try{\n            if (turn) {\n                src.searchParams.set('theme','dark')\n                card.src = src.toString()\n            } else {\n                src.searchParams.delete('theme')\n                card.src = src.toString()\n            }\n        } catch(e){\n            // none\n        }\n    });\n}","class Timeline {\n    constructor() {\n        this.timelineRoot = null;\n        this.modalMask = null;\n        this.modalContent = null;\n        this.modalClose = null;\n        this.boundHandleClick = this.handleClick.bind(this);\n        this.boundHandleModalClose = this.handleModalClose.bind(this);\n        this.boundHandleMaskClick = this.handleMaskClick.bind(this);\n\n        // \n        const htmlLang = (document.documentElement.lang || '').toLowerCase();\n        // console.log('Detected HTML lang:', htmlLang);\n        \n        // \n        const zhVariants = ['zh-hans', 'zh-cn', 'zh', 'zh-hans-cn'];\n        const twVariants = ['zh-hant', 'zh-tw', 'zh-hant-tw'];\n        \n        // \n        if (zhVariants.some(variant => htmlLang.includes(variant))) {\n            this.currentLang = 'zh-CN';\n        } else if (twVariants.some(variant => htmlLang.includes(variant))) {\n            this.currentLang = 'zh-TW';\n        } else if (htmlLang.startsWith('ja')) {\n            this.currentLang = 'ja';\n        } else if (htmlLang.startsWith('fr')) {\n            this.currentLang = 'fr';\n        } else {\n            this.currentLang = 'en';\n        }\n            \n        // console.log('Selected language:', this.currentLang);\n    }\n\n    init() {\n        this.timelineRoot = document.getElementById('timeline-root');\n        this.categoryRoot = document.getElementById('category-root');\n        this.modalMask = document.getElementById('timeline-modal-mask');\n        this.modalContent = document.getElementById('timeline-modal-content');\n        this.modalClose = document.getElementById('timeline-modal-close');\n        this.modalMain = document.querySelector(\"#timeline-modal-mask\")\n\n        if (!this.timelineRoot || !this.modalMask || !this.modalContent || !this.modalClose) {\n            document.documentElement.style.overflowY = 'auto';\n            return;\n        }\n\n        this.contentAPI = this.modalContent.dataset.archiveapi;\n        this.contents = ''; //\n        (async function(){await timelineInstance.FetchContents()}()) ;\n\n        this.bindEvents();\n    }\n\n    async FetchContents() {\n        try {\n            const response = await fetch(this.contentAPI);\n            this.contents = await response.json();\n        } catch (error) {\n            console.warn(\"...\", error);\n            try {\n                const response = await fetch(this.contentAPI);\n                this.contents = await response.json();\n            } catch (retryError) {\n                console.error(\":\", retryError);\n                this.contents = {};\n            }\n        }\n    }\n\n    destroy() {\n        if (this.timelineRoot) {\n            this.timelineRoot.removeEventListener('click', this.boundHandleClick);\n        }\n        if (this.categoryRoot) {\n            this.categoryRoot.removeEventListener('click', this.boundHandleClick)\n        }\n        if (this.modalClose) {\n            this.modalClose.removeEventListener('click', this.boundHandleModalClose);\n        }\n        if (this.modalMask) {\n            this.modalMask.removeEventListener('click', this.boundHandleMaskClick);\n        }\n        document.documentElement.style.overflowY = 'auto';\n    }\n\n    bindEvents() {\n        this.timelineRoot.addEventListener('click', this.boundHandleClick);\n        this.categoryRoot.addEventListener('click', this.boundHandleClick)\n        this.modalClose.addEventListener('click', this.boundHandleModalClose);\n        this.modalMask.addEventListener('click', this.boundHandleMaskClick);\n    }\n\n    handleClick(e) {\n        if (!this.contents) return; // \n        if (e.target.matches('a')) return; // \n        \n        const yearCard = e.target.closest('.timeline-year-card');\n        if (yearCard && !e.target.matches('a')) {\n            let year = yearCard.dataset.year;\n            let yearData = this.filterByYear(year);\n            this.renderModal(`${year}`, yearData, 'year');\n    \n            this.modalMain.showModal();\n            document.documentElement.style.overflow = 'hidden';\n        }\n\n        const categoryCard = e.target.closest('.category-card');\n        if (categoryCard) {\n            const catId = parseInt(categoryCard.dataset.categoryid, 10);\n            const categoryData = this.filterByCategory(catId);\n            this.renderModal(categoryCard.querySelector('.category-name').innerHTML, categoryData, 'category');\n\n            this.modalMain.showModal();\n            document.documentElement.style.overflow = 'hidden';\n        }\n    }\n\n    handleModalClose() {\n        this.modalMask.classList.remove('active');\n        this.modalMain.close();\n        document.documentElement.style.overflowY = 'auto';\n    }\n\n    handleMaskClick(e) {\n        if (e.target === this.modalMask) {\n            this.modalMask.classList.remove('active');\n            this.modalMain.close();\n            document.documentElement.style.overflowY = 'auto';\n        }\n    }\n\n    filterByYear(year) {\n        if (this.contents[year]) {\n            return {\n                [year]: this.contents[year]\n            };\n        }\n        return {};\n    }\n\n    filterByCategory(catId) {\n        const result = {};\n        for (const [year, months] of Object.entries(this.contents)) {\n        for (const [month, posts] of Object.entries(months)) {\n            const matched = posts.filter(post =>\n            Array.isArray(post.categories) && post.categories.includes(catId)\n            );\n            if (matched.length) {\n            result[year] = result[year] || {};\n            result[year][month] = matched;\n            }\n        }\n        }\n        return result;\n    }\n\n    renderModal(label, data, type) {\n        let totalStats = {\n            posts: 0,\n            views: 0,\n            words: 0,\n            comments: 0\n        };\n        \n        let typeStats = {\n            shuoshuo: {\n                posts: 0,\n                views: 0,\n                words: 0,\n                comments: 0\n            },\n            article: {\n                posts: 0,\n                views: 0,\n                words: 0,\n                comments: 0\n            },\n        };\n\n        // \n        Object.values(data).forEach(monthObj => {\n            Object.values(monthObj).forEach(posts => {\n                posts.forEach(post => {\n                    if (post.meta.type == \"page\") {\n                        return;\n                    }\n\n                    const type = post.meta.type || 'article';\n                    const views = parseInt(post.meta.views) || 0;\n                    const words = parseInt(post.meta.words) || 0;\n                    const comments = parseInt(post.comment_count) || 0;\n\n                    totalStats.posts++;\n                    totalStats.views += views;\n                    totalStats.words += words;\n                    totalStats.comments += comments;\n\n                    typeStats[type].posts++;\n                    typeStats[type].views += views;\n                    typeStats[type].words += words;\n                    typeStats[type].comments += comments;\n                });\n            });\n        });\n        // \n        let timelineTranslations = {\n            'zh-CN': {\n                yearOverview: '',\n                categoryOverview: '',\n                articleCount: '',\n                articles: '',\n                shuoshuo: '',\n                readCount: '',\n                times: '',\n                wordCount: '',\n                characters: '',\n                commentCount: '',\n                comments: '',\n                month: ''\n            },\n            'zh-TW': {\n                yearOverview: '',\n                categoryOverview: '',\n                articleCount: '',\n                articles: '',\n                shuoshuo: '',\n                readCount: '',\n                times: '',\n                wordCount: '',\n                characters: '',\n                commentCount: '',\n                comments: '',\n                month: ''\n            },\n            'en': {\n                yearOverview: 'Year Overview',\n                categoryOverview: 'Category Overview',\n                articleCount: 'Posts',\n                articles: 'Articles',\n                shuoshuo: 'Shuoshuo',\n                readCount: 'Views',\n                times: 'times',\n                wordCount: 'Words',\n                characters: 'chars',\n                commentCount: 'Comments',\n                comments: '',\n                month: ''\n            },\n            'ja': {\n                yearOverview: '',\n                categoryOverview: '',\n                articleCount: '',\n                articles: '',\n                shuoshuo: '',\n                readCount: '',\n                times: '',\n                wordCount: '',\n                characters: '',\n                commentCount: '',\n                comments: '',\n                month: ''\n            },    \n            'fr': {\n                yearOverview: 'Aperu annuel',\n                categoryOverview: 'Aperu des catgories',\n                articleCount: 'Articles',\n                articles: 'Articles',\n                shuoshuo: 'Shuoshuo',\n                readCount: 'Vues',\n                times: 'fois',\n                wordCount: 'Mots',\n                characters: 'caractres',\n                commentCount: 'Commentaires',\n                comments: '',\n                month: ''\n            }\n        };\n\n        let t = timelineTranslations[this.currentLang];\n        let typeTitle = type=='year' ? t.yearOverview : t.categoryOverview;\n        let html = `\n            <h2 class=\"timeline-modal-title\">${label} ${typeTitle}</h2>\n            <div class=\"timeline-modal-stats-grid\">\n                <div class=\"timeline-modal-statbox\">\n                    <i class=\"stat-icon fas fa-file-alt\"></i>\n                    <span class=\"stat-label\">${t.articleCount}</span>\n                    <span class=\"stat-value\">${totalStats.posts}</span>                    \n                    <div class=\"stat-tooltip\">\n                        ${t.articles}${typeStats.article.posts}<br>\n                        ${t.shuoshuo}${typeStats.shuoshuo.posts}\n                    </div>\n                </div>\n                <div class=\"timeline-modal-statbox\">\n                    <i class=\"stat-icon fas fa-eye\"></i>\n                    <span class=\"stat-label\">${t.readCount}</span>\n                    <span class=\"stat-value\">${toFixNum(totalStats.views)}</span>\n                    <div class=\"stat-tooltip\">\n                        ${t.articles}${typeStats.article.views} ${t.times}<br>\n                        ${t.shuoshuo}${toFixNum(typeStats.shuoshuo.views)} ${t.times}\n                    </div>\n                </div>\n                <div class=\"timeline-modal-statbox\">\n                    <i class=\"stat-icon fas fa-font\"></i>\n                    <span class=\"stat-label\">${t.wordCount}</span>\n                    <span class=\"stat-value\">${toFixNum(totalStats.words)}</span>\n                    <div class=\"stat-tooltip\">\n                        ${t.articles}${toFixNum(typeStats.article.words)} ${t.characters}<br>\n                        ${t.shuoshuo}${toFixNum(typeStats.shuoshuo.words)} ${t.characters}\n                    </div>\n                </div>\n                <div class=\"timeline-modal-statbox\">\n                    <i class=\"stat-icon fas fa-comments\"></i>\n                    <span class=\"stat-label\">${t.commentCount}</span>\n                    <span class=\"stat-value\">${totalStats.comments}</span>                    \n                    <div class=\"stat-tooltip\">\n                        ${t.articles}${typeStats.article.comments} ${t.comments}<br>\n                        ${t.shuoshuo}${typeStats.shuoshuo.comments} ${t.comments}\n                    </div>\n                </div>\n            </div>`;\n        \n        const monthsDesc = Object.entries(data)\n            .sort((a, b) => parseInt(b[0], 10) - parseInt(a[0], 10));\n\n        for (const [year, monthsObj] of monthsDesc) {\n            const months = Object.entries(monthsObj)\n                .sort((a, b) => parseInt(b[0], 10) - parseInt(a[0], 10));\n            \n            for (const [month, posts] of months) {\n                let monthTitle = type=='year' ? `${month}${t.month}` : `${year}-${month}${t.month}`\n                html += `\n                <div class=\"timeline-modal-month-group\">\n                    <h3 class=\"timeline-modal-month-title\">${monthTitle}</h3>\n                    <div class=\"timeline-modal-post-list\">\n                `;\n\n                posts\n                    .slice()\n                    .sort((a, b) => new Date(b.post_date) - new Date(a.post_date))\n                    .forEach(post => {\n                        if (post.meta.type === 'page') return; // \n                        const date = new Date(post.post_date);\n                        const formattedDate = `${date.getMonth() + 1}-${date.getDate()}`;\n                        const postType = post.meta.type === 'shuoshuo' ? ` [${t.shuoshuo}]` : '';\n                        html += `\n                            <a href=\"${post.link}\" class=\"timeline-modal-post-item\">\n                                <span class=\"timeline-modal-post-title\">${post.post_title}${postType}</span>\n                                <span class=\"timeline-modal-post-date\">${formattedDate}</span>\n                            </a>`;\n                    });\n                html += `</div></div>`;\n            }\n        }\n\n        this.modalContent.innerHTML = html;\n        this.modalMask.classList.add('active');\n    }\n}\n\n// \nlet timelineInstance = null;\n\nexport default function initTimeArchive() {\n    if (timelineInstance) {\n        timelineInstance.destroy();\n        timelineInstance = null;\n    }\n    timelineInstance = new Timeline();\n    timelineInstance.init();\n}\n\nfunction toFixNum(num) {\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(2) + 'm';\n    } else {\n      return num;\n    }\n  }\n","let visibilityHandler = null;\nlet scrollHandler = null;\nlet videoClickHandler = null;\nlet appClickHandler = null;\nlet appObserverInstance = null;\nlet imgObserverInstance = null;\nlet videoContainer = null;\nlet isInitialized = false;\nlet isAdmin = null;\nlet app = null;\n\nexport default function bili_fav_init () {\n    function init(){\n        app = document.getElementById(\"bilibili-favlist-app\");\n        isAdmin = _iro.is_admin;\n        cleanup();\n        if (app) {\n            initBilibiliFavList();\n        }\n    }\n    document.addEventListener(\"pjax:complete\",init);\n    init();\n}\n\nfunction cleanup () {\n    if (visibilityHandler) {\n        document.removeEventListener(\"visibilitychange\", visibilityHandler);\n        visibilityHandler = null;\n    }\n    if (scrollHandler) {\n        window.removeEventListener(\"scroll\", scrollHandler);\n        scrollHandler = null;\n    }\n    if (videoClickHandler) {\n        document.removeEventListener(\"click\", videoClickHandler);\n        videoClickHandler = null;\n    }\n    const app = document.getElementById(\"bilibili-favlist-app\");\n    if (app) {\n        if (appClickHandler) {\n            app.removeEventListener(\"click\", appClickHandler);\n            appClickHandler = null;\n        }\n    }\n    if (appObserverInstance) {\n        appObserverInstance.disconnect();\n        appObserverInstance = null;\n    }\n    if (imgObserverInstance) {\n        imgObserverInstance.disconnect();\n        imgObserverInstance = null;\n    }\n    isInitialized = false;\n};\n\n// Bilibili\nasync function initBilibiliFavList() {\n    if (isInitialized) {\n        return;\n    }\n    cleanup();\n\n    isInitialized = true;\n\n    try {\n        const restApiUrl = _iro.iro_api;\n        const wpnonce = _iro.nonce;\n\n        if (!restApiUrl) {\n            throw new Error(\"REST API\");\n        }\n\n        const state = {\n            folders: [],\n            currentFolder: null,\n            loading: true,\n            pageSize: 12,\n            currentItems: [],\n            currentPage: 1,\n            totalPages: 0,\n            error: null,\n            lastDataUpdate: 0,\n            fromCache: false,\n            cacheExpiresIn: 0,\n            cacheAge: 0,\n            cache: new Map(),\n        };\n\n        const cache = {\n            getKey: (folderId, page) => `folder_${folderId}_page_${page}`,\n            set: (folderId, page, data) => {\n                const key = cache.getKey(folderId, page);\n                state.cache.set(key, {\n                    timestamp: Date.now(),\n                    data: data,\n                });\n                try {\n                    const lsKey = `bilibili_favlist_${folderId}_${page}`;\n                    localStorage.setItem(\n                        lsKey,\n                        JSON.stringify({\n                            timestamp: Date.now(),\n                            data: data,\n                        })\n                    );\n                } catch (e) {\n                }\n            },\n            get: (folderId, page) => {\n                const key = cache.getKey(folderId, page);\n                let item = state.cache.get(key);\n                if (!item) {\n                    try {\n                        const lsKey = `bilibili_favlist_${folderId}_${page}`;\n                        const savedData = localStorage.getItem(lsKey);\n                        if (savedData) {\n                            const parsed = JSON.parse(savedData);\n                            if (\n                                parsed &&\n                                parsed.timestamp &&\n                                Date.now() - parsed.timestamp <\n                                    12 * 60 * 60 * 1000\n                            ) {\n                                state.cache.set(key, parsed);\n                                item = parsed;\n                            } else {\n                                localStorage.removeItem(lsKey);\n                            }\n                        }\n                    } catch (e) {}\n                }\n                return item;\n            },\n            isValid: (cachedItem) => {\n                if (!cachedItem) return false;\n                return Date.now() - cachedItem.timestamp < 12 * 60 * 60 * 1000;\n            },\n        };\n\n        async function initApp() {\n            try {\n                await fetchAllFolders();\n                renderApp();\n                bindEvents(); // Bind events after rendering\n                setupScrollEffects(); // Setup effects after rendering\n                imgObserverInstance = setupImageLazyLoading(); // Setup lazy loading and store observer\n                setupVideoModal(); // Setup modal structure\n                setupVideoItemsClickEvent(); // Setup click listener for video items\n                setupScrollAnimations(); // Setup scroll animations\n            } catch (error) {\n                let errorMsg = error.message || \"\";\n                showError(`: ${errorMsg}<br>`);\n            }\n        }\n\n        async function fetchAllFolders(forceRefresh = false) {\n            state.loading = true;\n            renderApp();\n\n            if (!forceRefresh) {\n                try {\n                    const savedData = localStorage.getItem(\"bilibili_favlist_folders\");\n                    if (savedData) {\n                        const parsed = JSON.parse(savedData);\n                        if (\n                            parsed &&\n                            parsed.timestamp &&\n                            Date.now() - parsed.timestamp < 12 * 60 * 60 * 1000\n                        ) {\n                            state.folders = parsed.folders;\n                            if (state.folders?.length) {\n                                state.currentFolder =\n                                    state.currentFolder || state.folders[0].id;\n                                await fetchFolderItems(\n                                    state.currentFolder,\n                                    1,\n                                    false\n                                );\n                                return;\n                            }\n                        } else {\n                            localStorage.removeItem(\"bilibili_favlist_folders\"); // Remove expired\n                        }\n                    }\n                } catch (e) {}\n            }\n\n            const endpoint = `${restApiUrl}/favlist/bilibili/folders`;\n            try {\n                let url = `${endpoint}?_wpnonce=${wpnonce}`;\n                if (forceRefresh) {\n                    url += `&_t=${Date.now()}`;\n                }\n\n                const response = await fetch(url, {\n                    headers: {\n                        \"Cache-Control\": forceRefresh\n                            ? \"no-cache, no-store, must-revalidate\"\n                            : \"max-age=43200\",\n                        Pragma: forceRefresh ? \"no-cache\" : undefined,\n                    },\n                });\n\n                if (!response.ok) throw new Error(` (${response.status})`);\n\n                const data = await response.json();\n                if (data.code !== 0) throw new Error(data.message || \"\");\n\n                state.folders = data.data.list || [];\n                if (state.folders?.length) {\n                    try {\n                        localStorage.setItem(\"bilibili_favlist_folders\",JSON.stringify({timestamp: Date.now(),folders: state.folders,}));\n                    } catch (e) {}\n                    state.currentFolder = state.folders[0].id;\n                    await fetchFolderItems(state.currentFolder,1,forceRefresh);\n                } else {\n                    state.loading = false;\n                    state.currentItems = [];\n                    state.totalPages = 0;\n                    renderApp();\n                }\n            } catch (error) {\n                showError(\"\");\n                state.loading = false;\n                renderApp();\n            }\n        }\n\n        async function fetchFolderItems(folderId,page = 1,forceRefresh = false) {\n            state.loading = true;\n            state.error = null;\n            state.currentPage = page;\n            state.currentFolder = folderId;\n            renderApp();\n\n            if (!forceRefresh) {\n                const cachedData = cache.get(folderId, page);\n                if (cache.isValid(cachedData)) {\n                    const folderData = cachedData.data;\n                    state.currentItems = folderData.medias || [];\n                    state.totalPages = Math.ceil(\n                        (folderData.info?.media_count || 0) / state.pageSize\n                    );\n                    state.fromCache = true;\n                    state.cacheAge = Math.floor(\n                        (Date.now() - cachedData.timestamp) / 1000\n                    );\n                    state.loading = false;\n                    renderApp(true);\n                    return;\n                }\n            }\n            await fetchFolderItemsFromNetwork(folderId, page, forceRefresh);\n        }\n\n        async function fetchFolderItemsFromNetwork(folderId,page = 1,forceRefresh = false) {\n            const endpoint = `${restApiUrl}/favlist/bilibili`;\n            try {\n                let url = `${endpoint}?folder_id=${folderId}&page=${page}&_wpnonce=${wpnonce}`;\n                if (forceRefresh) {\n                    url += `&_t=${Date.now()}`;\n                }\n\n                const response = await fetch(url, {\n                    headers: {\n                        \"Cache-Control\": forceRefresh\n                            ? \"no-cache, no-store, must-revalidate\"\n                            : \"max-age=43200\",\n                        Pragma: forceRefresh ? \"no-cache\" : undefined,\n                    },\n                });\n\n                if (!response.ok)\n                    throw new Error(` (${response.status})`);\n\n                const data = await response.json();\n                if (data.code !== 0)\n                    throw new Error(data.message || \"\");\n\n                const folderData = data.data;\n                cache.set(folderId, page, folderData); // Update cache\n\n                state.currentItems = folderData.medias || [];\n                state.totalPages = Math.ceil(\n                    (folderData.info?.media_count || 0) / state.pageSize\n                );\n                state.fromCache = data.cache_info?.from_cache || false;\n                state.cacheExpiresIn = data.cache_info?.expires_in || 0;\n                state.lastDataUpdate = Date.now();\n            } catch (error) {\n                showError(`: ${error.message}. `);\n                state.currentItems = [];\n                state.totalPages = 0;\n            } finally {\n                state.loading = false;\n                renderApp(true);\n            }\n        }\n\n        function showError(message) {\n            state.error = message;\n            state.loading = false;\n        }\n\n        function renderApp(isUpdate = false) {\n            const EXIT_ANIMATION_DURATION = 400; //  (ms)\n            const EXIT_STAGGER_DELAY = 50; //  (ms)\n            const ENTER_STAGGER_DELAY = 30; //  (ms) - \n            const folderSelectorHtml =\n                state.folders.length > 0 ? renderFolderSelector() : \"\";\n            let contentHtml = \"\";\n\n            if (state.error) {\n                contentHtml = `\n                    <div class=\"fav-section\">\n                    <div class=\"fav-content\">\n                    <div class=\"fav-empty\">\n                    <p>${state.error}</p>\n                    <button class=\"page-btn retry-btn\"></button>\n                    </div>\n                    </div>\n                    </div>\n                `;\n            } else if (state.loading && !state.currentItems.length) {\n                contentHtml = renderLoadingSkeleton();\n            } else if (!state.folders.length && !state.loading) {\n                contentHtml = `\n                    <div class=\"fav-section\">\n                    <div class=\"fav-content\">\n                    <div class=\"fav-empty\">\n                    <p>UID</p>\n                        <button class=\"page-btn retry-btn\"></button>\n                    </div>\n                    </div>\n                    </div>\n                `;\n            } else {\n                contentHtml = renderCurrentFolder(); // renderCurrentFolder  HTML\n            }\n\n            const existingContent = app.querySelector(\".fav-section\");\n            const wasSkeleton =\n                existingContent &&\n                existingContent.querySelector(\".fav-item-skeleton\");\n            // \n            const needsAnimation =\n                isUpdate &&\n                existingContent &&\n                !wasSkeleton &&\n                !state.loading &&\n                !state.error;\n\n            const renderNewContent = () => {\n                app.innerHTML = folderSelectorHtml + contentHtml; //  tabs \n\n                // Re-bind events and apply effects to new content\n                bindAppContainerEvents();\n                if (\n                    !state.loading &&\n                    !state.error &&\n                    state.currentItems.length > 0\n                ) {\n                    const newItems = app.querySelectorAll(\".fav-item\");\n                    newItems.forEach((item, index) => {\n                        // \n                        item.classList.add(\"fav-item-enter\");\n                        // \n                        item.style.transitionDelay = `${\n                            index * ENTER_STAGGER_DELAY\n                        }ms`;\n                        requestAnimationFrame(() => {\n                            //  CSS transition\n                            if (item && item.parentNode) {\n                                item.classList.remove(\"fav-item-enter\");\n                            }\n                        });\n                    });\n                    // \n                    if (imgObserverInstance) imgObserverInstance.disconnect();\n                    imgObserverInstance = setupImageLazyLoading();\n                    setupScrollAnimations(); // \n                } else {\n                    // \n                    if (imgObserverInstance) imgObserverInstance.disconnect(); // \n                    imgObserverInstance = null;\n                    if (scrollHandler)\n                        window.removeEventListener(\"scroll\", scrollHandler); // \n                    scrollHandler = null;\n                }\n            };\n\n            if (needsAnimation) {\n                const itemsToExit =\n                    existingContent.querySelectorAll(\".fav-item\");\n                if (itemsToExit.length > 0) {\n                    //  ()\n                    const totalExitDuration =\n                        EXIT_ANIMATION_DURATION +\n                        (itemsToExit.length - 1) * EXIT_STAGGER_DELAY;\n\n                    // \n                    itemsToExit.forEach((item, index) => {\n                        //  requestAnimationFrame \n                        requestAnimationFrame(() => {\n                            // \n                            if (item && item.parentNode) {\n                                item.style.transitionDelay = `${\n                                    index * EXIT_STAGGER_DELAY\n                                }ms`;\n                                item.classList.add(\"fav-item-exit\");\n                                // \n                                setTimeout(() => {\n                                    if (item && item.parentNode) {\n                                        // \n                                        item.style.transitionDelay = \"\";\n                                    }\n                                }, EXIT_ANIMATION_DURATION + index * EXIT_STAGGER_DELAY);\n                            }\n                        });\n                    });\n\n                    //  renderNewContent\n                    //  80-90% \n                    const waitTimeForNewContent = Math.max(\n                        EXIT_ANIMATION_DURATION,\n                        totalExitDuration - EXIT_STAGGER_DELAY * 2\n                    ); // \n\n                    // \n                    setTimeout(renderNewContent, waitTimeForNewContent);\n                } else {\n                    // \n                    renderNewContent();\n                }\n            } else {\n                // \n                renderNewContent();\n            }\n        }\n        function renderLoadingSkeleton() {\n            let skeletonHtml =\n                '<div class=\"fav-section\"><div class=\"fav-content\"><div class=\"fav-grid\">';\n            for (let i = 0; i < state.pageSize; i++) {\n                skeletonHtml += `\n                    <div class=\"fav-item fav-item-skeleton\">\n                    <div class=\"fav-item-content-wrapper\">\n                    <div class=\"fav-item-thumb\">\n                    <div class=\"fav-item-thumb-placeholder\"></div>\n                    </div>\n                    <div class=\"fav-item-desc-wrapper\">\n                    <div class=\"fav-item-desc\"></div>\n                    <div class=\"fav-item-desc\"></div>\n                    </div>\n                    </div>\n                    </div>\n                `;\n            }\n            skeletonHtml += \"</div></div></div>\";\n            return skeletonHtml;\n        }\n\n        function renderFolderSelector() {\n            let refreshButtonHtml = \"\";\n            // Only add refresh button if the user is an admin\n            if (isAdmin) {\n                refreshButtonHtml = `\n                    <div class=\"fav-tab refresh-btn\" title=\" ()\">\n                    <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path d=\"M3 2v6h6\"></path>\n                    <path d=\"M21 12A9 9 0 0 0 6 5.3L3 8\"></path>\n                    <path d=\"M21 22v-6h-6\"></path>\n                    <path d=\"M3 12a9 9 0 0 0 15 6.7l3-2.7\"></path>\n                    </svg>\n                    <span class=\"refresh-text\"></span>\n                    </div>\n                `;\n            }\n\n            return `\n                <div class=\"fav-tabs\">\n                ${state.folders\n                    .map(\n                        (folder) => `\n                            <div class=\"fav-tab ${folder.id === state.currentFolder ? \"active\" : \"\"}\"\n                            data-folder-id=\"${folder.id}\">\n                            ${folder.title}\n                            <span class=\"fav-tab-count\">${folder.media_count}</span>\n                            </div>\n                        `\n                    )\n                    .join(\"\")}\n                ${refreshButtonHtml}\n                </div>\n            `;\n        }\n\n        function renderCurrentFolder() {\n            const currentFolder = state.folders.find(\n                (folder) => folder.id === state.currentFolder\n            );\n\n            let contentHtml = \"\";\n            if (!state.currentItems.length && !state.loading) {\n                contentHtml = `<div class=\"fav-empty\"><p></p></div>`;\n            } else if (state.currentItems.length) {\n                contentHtml = `\n                    <div class=\"fav-grid\">\n                    ${state.currentItems.map((item) => renderFavItem(item)).join(\"\")}\n                    </div>\n                    ${renderPagination()}\n                `;\n            }\n\n            return `\n                <div class=\"fav-section\">\n                <div class=\"fav-content\">\n                ${contentHtml}\n                </div>\n                </div>\n            `;\n        }\n\n        function renderFavItem(item) {\n            // ... existing renderFavItem code ...\n            let bvid = item.bvid || \"\";\n            // Ensure cover uses HTTPS and handle potential missing cover\n            let cover = item.cover\n                ? item.cover.replace(/^http:/, \"https:\")\n                : \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"; // Placeholder for missing cover\n\n            return `\n                <div class=\"fav-item\" data-bvid=\"${bvid}\" data-title=\"${item.title}\" data-up=\"${\n                                item.upper?.name || \"\"\n                            }\" tabindex=\"0\" role=\"button\" aria-label=\": ${item.title}\">\n                <div class=\"fav-item-content-wrapper\">\n                <div class=\"fav-item-thumb\">\n                <div class=\"fav-item-thumb-placeholder\">\n                <!--  spinner -->\n                </div>\n                <img data-src=\"${cover}\" class=\"fav-thumb-img\" src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" referrerpolicy=\"no-referrer\" alt=\"${\n                                item.title\n                            }\">\n                <div class=\"fav-item-title-area\">\n                <h3 class=\"fav-item-title\" title=\"${item.title}\">${item.title}</h3>\n                </div>\n                <div class=\"fav-item-up\">\n                <span class=\"up-name\">UP: ${item.upper?.name || \"\"}</span>\n                </div>\n                <div class=\"fav-item-play-btn\">\n                <svg viewBox=\"0 0 24 24\" width=\"36\" height=\"36\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><polygon points=\"10 8 16 12 10 16 10 8\" fill=\"currentColor\"></polygon></svg>\n                </div>\n                </div>\n                <div class=\"fav-item-desc-wrapper\">\n                <div class=\"fav-item-desc\" title=\"${item.intro || \"\"}\">${\n                                item.intro || \"\"\n                            }</div>\n                </div>\n                </div>\n                </div>\n            `;\n        }\n\n        function renderPagination() {\n            // ... existing renderPagination code ...\n            if (state.totalPages <= 1) return \"\";\n\n            let paginationHtml = '<div class=\"fav-pagination\">';\n            const currentPage = state.currentPage;\n            const totalPages = state.totalPages;\n\n            // Prev Button\n            paginationHtml += `<button class=\"page-btn prev-btn\" ${\n                currentPage <= 1 ? \"disabled\" : \"\"\n            } data-page=\"${currentPage - 1}\"></button>`;\n\n            // Page numbers logic (simplified example)\n            const maxPagesToShow = 5;\n            let startPage = Math.max(\n                1,\n                currentPage - Math.floor(maxPagesToShow / 2)\n            );\n            let endPage = Math.min(totalPages, startPage + maxPagesToShow - 1);\n\n            if (endPage - startPage + 1 < maxPagesToShow) {\n                startPage = Math.max(1, endPage - maxPagesToShow + 1);\n            }\n\n            if (startPage > 1) {\n                paginationHtml += `<button class=\"page-btn page-num\" data-page=\"1\">1</button>`;\n                if (startPage > 2)\n                    paginationHtml += `<button class=\"page-btn page-ellipsis\" disabled>...</button>`;\n            }\n\n            for (let i = startPage; i <= endPage; i++) {\n                paginationHtml += `<button class=\"page-btn page-num ${\n                    i === currentPage ? \"active\" : \"\"\n                }\" data-page=\"${i}\">${i}</button>`;\n            }\n\n            if (endPage < totalPages) {\n                if (endPage < totalPages - 1)\n                    paginationHtml += `<button class=\"page-btn page-ellipsis\" disabled>...</button>`;\n                paginationHtml += `<button class=\"page-btn page-num\" data-page=\"${totalPages}\">${totalPages}</button>`;\n            }\n\n            // Next Button\n            paginationHtml += `<button class=\"page-btn next-btn\" ${\n                currentPage >= totalPages ? \"disabled\" : \"\"\n            } data-page=\"${currentPage + 1}\"></button>`;\n\n            paginationHtml += \"</div>\";\n            return paginationHtml;\n        }\n\n        function bindAppContainerEvents() {\n            if (appClickHandler)\n                app.removeEventListener(\"click\", appClickHandler);\n\n            appClickHandler = async function (e) {\n                const target = e.target;\n                const REFRESH_COOLDOWN = 60 * 1000;\n\n                const refreshBtn = target.closest(\".refresh-btn\");\n                if (\n                    isAdmin &&\n                    refreshBtn &&\n                    !refreshBtn.classList.contains(\"refreshing\")\n                ) {\n                    const lastRefreshTs = parseInt(localStorage.getItem(\"bilibili_last_refresh_ts\") || \"0\",10);\n                    const now = Date.now();\n                    const remainingTime =\n                        REFRESH_COOLDOWN - (now - lastRefreshTs);\n                    const refreshTextSpan =\n                        refreshBtn.querySelector(\".refresh-text\");\n\n                    if (remainingTime > 0) {\n                        if (refreshTextSpan) {\n                            const originalText = refreshTextSpan.textContent;\n                            refreshTextSpan.textContent = ` (${Math.ceil(\n                                remainingTime / 1000\n                            )}s)`;\n                            setTimeout(() => {\n                                const currentBtn =app.querySelector(\".refresh-btn\");\n                                const currentTextSpan =currentBtn?.querySelector(\".refresh-text\");\n                                if (\n                                    currentTextSpan &&\n                                    currentTextSpan.textContent.startsWith(\n                                        \"\"\n                                    )\n                                ) {\n                                    currentTextSpan.textContent = \"\";\n                                }\n                            }, remainingTime);\n                        }\n                        return;\n                    }\n\n                    localStorage.setItem(\n                        \"bilibili_last_refresh_ts\",\n                        now.toString()\n                    );\n                    refreshBtn.classList.add(\"refreshing\");\n                    if (refreshTextSpan)\n                        refreshTextSpan.textContent = \"...\";\n\n                    try {\n                        localStorage.removeItem(\"bilibili_favlist_folders\");\n                        if (state.currentFolder) {\n                            for (let i = 1; i <= state.totalPages; i++) {\n                                localStorage.removeItem(\n                                    `bilibili_favlist_${state.currentFolder}_${i}`\n                                );\n                                state.cache.delete(\n                                    cache.getKey(state.currentFolder, i)\n                                );\n                            }\n                            localStorage.removeItem(\n                                `bilibili_favlist_${state.currentFolder}_${state.currentPage}`\n                            );\n                            state.cache.delete(\n                                cache.getKey(\n                                    state.currentFolder,\n                                    state.currentPage\n                                )\n                            );\n                        }\n                        state.cache = new Map();\n\n                        await fetchAllFolders(true);\n                    } catch (error) {\n                        showError(\"\");\n                        renderApp();\n                    } finally {\n                        const currentRefreshBtn =\n                            app.querySelector(\".refresh-btn\");\n                        if (currentRefreshBtn) {\n                            currentRefreshBtn.classList.remove(\"refreshing\");\n                            const currentTextSpan =\n                                currentRefreshBtn.querySelector(\n                                    \".refresh-text\"\n                                );\n                            if (currentTextSpan)\n                                currentTextSpan.textContent = \"\";\n                        }\n                    }\n                    return;\n                }\n\n                const tabEl = target.closest(\".fav-tab:not(.refresh-btn)\");\n                if (tabEl) {\n                    const folderId = parseInt(tabEl.dataset.folderId, 10);\n                    if (folderId !== state.currentFolder && !state.loading) {\n                        await fetchFolderItems(folderId, 1);\n                        return;\n                    }\n                    return;\n                }\n\n                const pageBtn = target.closest(\".page-btn[data-page]\");\n                if (\n                    pageBtn &&\n                    !pageBtn.disabled &&\n                    !pageBtn.classList.contains(\"active\")\n                ) {\n                    const page = parseInt(pageBtn.dataset.page, 10);\n                    if (page !== state.currentPage && !state.loading) {\n                        await fetchFolderItems(state.currentFolder, page);\n                        scrollToTop();\n                    }\n                    return;\n                }\n\n                // Retry button\n                const retryBtn = target.closest(\".retry-btn\");\n                if (retryBtn) {\n                    state.error = null;\n                    state.loading = true;\n                    renderApp();\n                    try {\n                        await fetchAllFolders(false);\n                    } catch (error) {\n                        showError(`: ${error.message}`);\n                        renderApp();\n                    }\n                    return;\n                }\n            };\n            app.addEventListener(\"click\", appClickHandler);\n        }\n\n        function bindGlobalEvents() {\n            let lastVisibilityChange = Date.now();\n            let needReloadOnReturn = false;\n            const RELOAD_THRESHOLD = 5 * 60 * 1000;\n\n            visibilityHandler = function () {\n                const now = Date.now();\n\n                if (document.visibilityState === \"hidden\") {\n                    lastVisibilityChange = now;\n                } else if (document.visibilityState === \"visible\") {\n                    const timeAway = now - lastVisibilityChange;\n                    if (\n                        isInitialized &&\n                        !state.loading &&\n                        state.folders.length > 0 &&\n                        (timeAway > RELOAD_THRESHOLD || needReloadOnReturn)\n                    ) {\n                        fetchFolderItems(\n                            state.currentFolder,\n                            state.currentPage,\n                            false\n                        );\n                        needReloadOnReturn = false;\n                    }\n                }\n            };\n            document.addEventListener(\"visibilitychange\", visibilityHandler);\n        }\n\n        // Bind all events\n        function bindEvents() {\n            bindAppContainerEvents();\n            bindGlobalEvents();\n        }\n        function scrollToTop() {\n            const contentArea = app.querySelector(\".fav-section\");\n            if (contentArea) {\n                window.scrollTo({\n                    top: contentArea.offsetTop - 80,\n                    behavior: \"smooth\",\n                });\n            }\n        }\n\n        function setupScrollEffects() {\n            const itemObserver = new IntersectionObserver(\n                (entries) => {\n                    entries.forEach((entry) => {\n                        if (entry.isIntersecting) {\n                            entry.target.classList.add(\"visible\");\n                            itemObserver.unobserve(entry.target);\n                        }\n                    });\n                },\n                { threshold: 0.1, rootMargin: \"0px 0px -50px 0px\" }\n            );\n\n            const items = app.querySelectorAll(\".fav-item:not(.visible)\");\n            items.forEach((item, index) => {\n                item.style.animationDelay = `${index * 0.05}s`; // Keep delay\n                itemObserver.observe(item);\n            });\n        }\n\n        function appMutationCallback (mutationsList){\n            for (const mutation of mutationsList) {\n                if (mutation.type === \"childList\") {\n                    mutation.addedNodes.forEach((node) => {\n                        if (node.nodeType === 1) {\n                            if (node.classList.contains(\"fav-item\")) {\n                                setupScrollEffects();\n                            }\n                            node.querySelectorAll(\n                                \"img.fav-thumb-img[data-src]\"\n                            ).forEach((img) => {\n                                if (imgObserverInstance)\n                                    imgObserverInstance.observe(img);\n                            });\n                        }\n                    });\n                }\n            }\n        };\n\n        function debounce(func, wait = 50) {\n            let timeout;\n            return function (...args) {\n                clearTimeout(timeout);\n                timeout = setTimeout(() => func.apply(this, args), wait);\n            };\n        }\n\n        function setupScrollAnimations() {\n            if (scrollHandler) {\n                window.removeEventListener(\"scroll\", scrollHandler);\n            }\n\n            scrollHandler = debounce(() => {\n                //  'fav-item-exit'  'visible'\n                const items = app.querySelectorAll(\n                    \".fav-item:not(.visible):not(.fav-item-exit)\"\n                );\n                const viewportHeight = window.innerHeight;\n                items.forEach((item) => {\n                    const rect = item.getBoundingClientRect();\n                    if (\n                        rect.top < viewportHeight * 0.9 &&\n                        rect.bottom > viewportHeight * 0.1\n                    ) {\n                        // .visible \n                        item.classList.add(\"visible\");\n                    }\n                });\n            }, 50); // Adjust debounce wait time as needed\n\n            window.addEventListener(\"scroll\", scrollHandler);\n            requestAnimationFrame(scrollHandler); //  rAF \n        }\n\n        function setupImageLazyLoading() {\n            if (imgObserverInstance) {\n                imgObserverInstance.disconnect();\n            }\n\n            const observer = new IntersectionObserver(\n                (entries, obs) => {\n                    entries.forEach((entry) => {\n                        if (entry.isIntersecting) {\n                            const img = entry.target;\n                            const src = img.getAttribute(\"data-src\");\n                            if (src) {\n                                const placeholder = img.previousElementSibling;\n\n                                img.onload = () => {\n                                    img.classList.add(\"loaded\");\n                                    if (\n                                        placeholder &&\n                                        placeholder.classList.contains(\n                                            \"fav-item-thumb-placeholder\"\n                                        )\n                                    ) {\n                                        placeholder.style.display = \"none\";\n                                    }\n                                };\n                                img.onerror = () => window.imgError(this);\n                                img.src = src;\n                                img.removeAttribute(\"data-src\");\n                            }\n                            obs.unobserve(img);\n                        }\n                    });\n                },\n                { threshold: 0.05, rootMargin: \"150px\" }\n            );\n\n            if (app) {\n                app.querySelectorAll(\"img.fav-thumb-img[data-src]\").forEach(\n                    (img) => observer.observe(img)\n                );\n            }\n            return observer;\n        }\n\n        // --- Video Modal ---\n        function setupVideoModal() {\n            videoContainer = document.querySelector(\".video-modal\");\n\n            function closeVideoModal () {\n                if (!videoContainer) return;\n                const container = videoContainer.querySelector(\".video-modal-container\");\n                const iframe = videoContainer.querySelector(\".video-modal-iframe\");\n\n                container.style.transform = \"translateY(20px)\";\n                container.style.opacity = \"0\";\n\n                setTimeout(() => {\n                        videoContainer.classList.remove(\"active\");\n                        videoContainer.close();\n                        document.body.style.overflow = \"\";\n                        if (iframe) iframe.src = \"about:blank\";\n                }, 300);\n            };\n            videoContainer.querySelector(\".video-modal-close\").addEventListener(\"click\", closeVideoModal);\n            videoContainer.addEventListener(\"click\", (e) => {\n                if (e.target === videoContainer) {\n                    closeVideoModal();\n                }\n            });\n            return videoContainer;\n        }\n\n        function handleFavItemClick(favItem) {\n            const bvid = favItem.getAttribute(\"data-bvid\");\n            if (bvid && videoContainer) {\n                const title = favItem.getAttribute(\"data-title\");\n                const upName = favItem.getAttribute(\"data-up\");\n\n                videoContainer.querySelector(\".video-modal-title\").textContent = title;\n                videoContainer.querySelector(\".video-modal-up-name\").textContent = \"UP: \" + upName;\n                videoContainer.querySelector(\".video-modal-open\").href = `https://www.bilibili.com/video/${bvid}`;\n\n                const iframe = videoContainer.querySelector(\".video-modal-iframe\");\n                iframe.src = `https://player.bilibili.com/player.html?bvid=${bvid}&page=1&autoplay=1&danmaku=1`;\n\n                videoContainer.showModal();\n                videoContainer.classList.add(\"active\");\n                document.body.style.overflow = \"hidden\";\n\n                setTimeout(() => {\n                    if (videoContainer) {\n                        const container = videoContainer.querySelector(\".video-modal-container\");\n                        if (container) {\n                            container.style.transform = \"translateY(0)\";\n                            container.style.opacity = \"1\";\n                        }\n                    }\n                }, 10);\n            }\n        }\n\n        function setupVideoItemsClickEvent() {\n            if (videoClickHandler) {\n                document.removeEventListener(\"click\", videoClickHandler);\n            }\n\n            videoClickHandler = (e) => {\n                const favItem = e.target.closest(\".fav-item\");\n                if (favItem) {\n                    e.preventDefault();\n                    handleFavItemClick(favItem);\n                }\n            };\n            document.addEventListener(\"click\", videoClickHandler);\n        }\n\n        // --- Initialization ---\n        await initApp();\n\n        if (appObserverInstance) {\n            appObserverInstance.disconnect();\n        }\n        appObserverInstance = new MutationObserver(appMutationCallback);\n        if (app) {\n            appObserverInstance.observe(app, {\n                childList: true,\n                subtree: true,\n            });\n        }\n    } catch (error) {\n        if (app) {\n            app.innerHTML = `\n                <div class=\"fav-empty\">\n                <p>: ${error.message || \"\"}</p>\n                <button class=\"page-btn retry-btn\"></button>\n                </div>\n            `;\n            app.querySelector(\".retry-btn\")?.addEventListener(\"click\", initBilibiliFavList);\n        }\n        isInitialized = false;\n    }\n};","export default function init_comment_captcha() {\n\n    document.addEventListener(\"pjax:complete\",init);\n    function init(){\n        iroCaptcha();\n        cfts();\n    }\n    init();\n\n    function iroCaptcha() {\n        let captchaHideTimeout = null;\n        let captchaField = document.querySelector('.comment-captcha .input');\n        let captchaImg = document.querySelector('.comment-captcha img');\n        \n        if (captchaField && captchaImg) {\n            captchaImg.addEventListener('click',refreshCaptcha);\n            captchaField.addEventListener('focus',showCaptcha);\n            captchaField.addEventListener('blur',hideCaptcha);\n            captchaImg.onerror = function() {\n                refreshCaptcha();\n                captchaImg.onerror = ''\n            }\n        }\n    \n        function showCaptcha() {\n            if (!captchaImg.dataset.loaded) {\n                captchaImg.dataset.loaded = true;\n                refreshCaptcha();\n            };\n            captchaField.setAttribute(\"placeholder\", \"\");\n            if (captchaHideTimeout) {\n                clearTimeout(captchaHideTimeout);\n                captchaHideTimeout = null;\n            }\n            captchaImg.style.width = \"120px\";\n            captchaImg.style.marginRight = \"10px\";\n        }\n    \n        function hideCaptcha() {\n            let placeholder = captchaField.dataset.placeholder || '';\n            captchaHideTimeout = setTimeout(function() {\n                captchaImg.style.width = \"0\";\n                captchaImg.style.marginRight = \"0\";\n                captchaField.setAttribute(\"placeholder\",placeholder);\n            }, 5000);\n        }\n            \n        function refreshCaptcha() {\n            fetch(_iro.captcha_endpoint)\n                .then(resp => resp.json())\n                .then(json => {\n                    captchaImg.src = json[\"data\"];\n                    document.querySelector(\"input[name=\\'timestamp\\']\").value = json[\"time\"];\n                    document.querySelector(\"input[name=\\'id\\']\").value = json[\"id\"];\n                })\n                .catch(error => console.error(\":\", error));\n        };\n    }\n\n    function cfts(){\n        let cfturnstile = document.querySelector('.comment-form .cfturnstile');\n        if (cfturnstile) {\n            let theme = \"light\";\n            let response = document.querySelector(\".comment-form .cf-turnstile-response\");\n            function loadTurnstile() {\n                return new Promise((resolve, reject) => {\n                    const script = document.createElement('script');\n                    script.src = 'https://challenges.cloudflare.com/turnstile/v0/api.js';\n                    script.onload = resolve;\n                    script.onerror = reject;\n                    document.head.appendChild(script);\n                });\n            }\n            loadTurnstile().then(()=>{\n                theme = document.querySelector('body.dark') ? \"dark\" : \"light\";\n                turnstile.render(cfturnstile, {\n                        sitekey: `${cfturnstile.dataset.key}`,\n                        theme: `${theme}`,\n                        callback: function(token) {\n                            response.value = token;\n                        },\n                    });\n                }\n            )\n        }\n    }\n}","import article_attach from './artile_attachment'\nimport { ready, slideToggle, buildAPI } from '../common/util'\nimport lazyload from \"../common/lazyload\"\nimport { createButterbar } from '../common/butterbar'\nimport './global-func'\nimport getqqinfo from './getqqinfo'\nimport addComment from './AddComment'\nimport { _$, __ } from '../common/sakurairo_global'\nimport LoadNextPage from './pagination'\nimport debounce from '@mui/utils/debounce'\nimport { code_highlight_style } from '../common/code-highlight'\nimport prepareEmoji from './emoji'\nimport initAnnotations from './annotation'\nimport initLinkSubmission from './link_form'\nimport init_steamCard from './steam_card'\nimport ghcardTheme from './ghcard_theme'\nimport initTimeArchive from './time_archive'\nimport bili_fav_init from './bili_fav'\nimport init_comment_captcha from './comment_captcha'\n\nfunction apply_post_theme_color() {\n    if (_iro.post_theme_color != false && _iro.post_theme_color != 'false') {\n        let post_theme_color = _iro.post_theme_color;\n        document.documentElement.style.setProperty('--article-theme-highlight', post_theme_color);\n    } else {\n        document.documentElement.style.removeProperty('--article-theme-highlight');\n    }\n}\n\nfunction click_to_view_image() {\n    const comment_inline = document.getElementsByClassName('comment_inline_img');\n    if (!comment_inline.length) return;\n    document.getElementsByClassName(\"comments-main\")[0].addEventListener(\"click\", function (e) {\n        if (e.target.classList.contains(\"comment_inline_img\")) {\n            window.open(e.target.src);\n        }\n    })\n}\nfunction clean_upload_images() {\n    document.getElementById(\"upload-img-show\").innerHTML = '';\n}\nfunction original_emoji_click() {\n    const emoji = document.getElementsByClassName('emoji-item');\n    if (!emoji.length) return;\n    document.querySelector(\".menhera-container\").addEventListener(\"click\", function (e) {\n        if (e.target.classList.contains(\"emoji-item\")) {\n            grin(e.target.innerText, \"custom\", \"`\", \"` \");\n        }\n    })\n}\nfunction XCS() {\n    const __list = 'commentwrap';\n    const form = document.getElementById(\"commentform\")\n    if (form) {\n        let statusSubmitting = false\n        form.addEventListener('submit', function (event) {\n            event.stopPropagation()\n            event.preventDefault();\n            if (statusSubmitting) return\n            const butterBarRef = createButterbar(__(\"....\"), true)\n            const form = new FormData(this)\n            form.append('action', 'ajax_comment')\n            statusSubmitting = true\n            fetch(_iro.ajaxurl, {\n                method: this.attributes.method.value,\n                body: form\n            }).then(async resp => {\n                const data = await resp.text()\n                if (resp.ok) {\n                    Array.from(document.getElementsByTagName('textarea'))\n                        .forEach((e) => e.value = '')\n                    const cancel = document.getElementById('cancel-comment-reply-link'),\n                        temp = document.getElementById('wp-temp-form-div'),\n                        respond = document.getElementById(addComment.respondId),\n                        //post = document.getElementById('comment_post_ID').value,\n                        parent = document.getElementById('comment_parent').value;\n                    if (parent != '0') {\n                        //jQuery('#respond').before('<ol class=\"children\">' + data + '</ol>');\n                        document.getElementById(\"respond\").insertAdjacentHTML('beforebegin', '<ol class=\"children\">' + data + '</ol>');\n                    } else if (!document.getElementsByClassName(__list).length) {\n                        if (_iro.formpostion == 'bottom') {\n                            document.getElementById(\"respond\").insertAdjacentHTML('beforebegin', '<ol class=\"' + __list + '\">' + data + '</ol>');\n                            //jQuery('#respond').before('<ol class=\"' + __list + '\">' + data + '</ol>');\n                        } else {\n                            document.getElementById(\"respond\").insertAdjacentHTML('afterend', '<ol class=\"' + __list + '\">' + data + '</ol>');\n                            //jQuery('#respond').after('<ol class=\"' + __list + '\">' + data + '</ol>');\n                        }\n                    } else {\n                        if (_iro.order == 'asc') {\n                            document.getElementsByClassName(\"commentwrap\")[1].insertAdjacentHTML('beforeend', data);\n                            //jQuery('.' + __list).append(data);\n                        } else {\n                            document.getElementsByClassName(\"commentwrap\")[1].insertAdjacentHTML('afterbegin', data);\n                            //jQuery('.' + __list).prepend(data);\n                        }\n                    }\n                    createButterbar(__(\"\"));\n                    document.dispatchEvent(new CustomEvent('ajax_comment_complete',))\n                    cancel.style.display = 'none';\n                    cancel.onclick = null;\n                    document.getElementById('comment_parent').value = '0';\n                    if (temp && respond) {\n                        temp.parentNode.insertBefore(respond, temp);\n                        temp.remove();\n                        //temp.parentNode.removeChild(temp)\n                    }\n                } else {\n                    createButterbar(data || 'HTTP' + resp.status + ':' + resp.statusText);\n                }\n            }).catch(reason => {\n                createButterbar(reason);\n            }).finally(() => {\n                butterBarRef.remove()\n                statusSubmitting = false\n            })\n            /* jQuery.ajax({\n                url: _iro.ajaxurl,\n                data: jQuery(this).serialize() + \"&action=ajax_comment\",\n                type: jQuery(this).attr('method'),\n                beforeSend: createButterbar(\"(Commiting)....\"),\n                error: function (request) {\n                    var t = addComment;\n                    t.createButterbar(request.responseText);\n                },\n                success: function (data) {\n                    jQuery('textarea').each(function () {\n                        this.value = ''\n                    });\n                    var t = addComment,\n                        cancel = t.I('cancel-comment-reply-link'),\n                        temp = t.I('wp-temp-form-div'),\n                        respond = t.I(t.respondId),\n                        post = t.I('comment_post_ID').value,\n                        parent = t.I('comment_parent').value;\n                    if (parent != '0') {\n                        jQuery('#respond').before('<ol class=\"children\">' + data + '</ol>');\n                    } else if (!jQuery('.' + __list).length) {\n                        if (_iro.formpostion == 'bottom') {\n                            jQuery('#respond').before('<ol class=\"' + __list + '\">' + data + '</ol>');\n                        } else {\n                            jQuery('#respond').after('<ol class=\"' + __list + '\">' + data + '</ol>');\n                        }\n                    } else {\n                        if (_iro.order == 'asc') {\n                            jQuery('.' + __list).append(data);\n                        } else {\n                            jQuery('.' + __list).prepend(data);\n                        }\n                    }\n                    t.createButterbar(\"(Succeed)\");\n                    lazyload();\n                    code_highlight_style();\n                    click_to_view_image();\n                    clean_upload_images();\n                    cancel.style.display = 'none';\n                    cancel.onclick = null;\n                    t.I('comment_parent').value = '0';\n                    if (temp && respond) {\n                        temp.parentNode.insertBefore(respond, temp);\n                        temp.remove();\n                        //temp.parentNode.removeChild(temp)\n                    }\n                }\n            }); */\n        })\n    }\n}\n\nfunction XCP() {\n    document.body.addEventListener('click', function (e) {\n        if (e.target.parentNode == document.getElementById(\"comments-navi\") && e.target.nodeName.toLowerCase() == \"a\") {\n            e.preventDefault();\n            e.stopPropagation();\n            let _this = e.target,\n                path = _this.pathname,\n                _xhr = new XMLHttpRequest();\n            _xhr.open(\"GET\", _this.getAttribute('href'), true);\n            _xhr.responseType = \"document\";\n            _xhr.onloadstart = () => {\n                let comments_navi = document.getElementById(\"comments-navi\"),\n                    commentwrap = document.querySelector(\"ul.commentwrap\"),\n                    loading_comments = document.getElementById(\"loading-comments\"),\n                    comments_list = document.getElementById(\"comments-list-title\");\n                comments_navi.remove();\n                commentwrap.remove();\n                //comments_navi.parentNode.removeChild(comments_navi);\n                //commentwrap.parentNode.removeChild(commentwrap);\n                loading_comments.style.display = \"block\";\n                slideToggle(loading_comments, 500, \"show\");\n                window.scrollTo({\n                    top: comments_list.getBoundingClientRect().top + window.pageYOffset - comments_list.clientTop - 65,\n                    behavior: \"smooth\"\n                });\n            }\n            _xhr.onreadystatechange = function () {\n                if (_xhr.readyState == 4 && _xhr.status == 200) {\n                    let json = _xhr.response,\n                        result = json.querySelector(\"ul.commentwrap\"),\n                        nextlink = json.getElementById(\"comments-navi\"),\n                        loading_comments = document.getElementById(\"loading-comments\");\n                    slideToggle(loading_comments, 200, \"hide\");\n                    document.getElementById(\"loading-comments\").insertAdjacentHTML('afterend', result.outerHTML);\n                    document.querySelector(\"ul.commentwrap\").insertAdjacentHTML('afterend', nextlink.outerHTML);\n                    lazyload();\n                    if (window.gtag) {\n                        gtag('config', _iro.google_analytics_id, {\n                            'page_path': path\n                        });\n                    }\n                    code_highlight_style();\n                    click_to_view_image();\n                    let commentwrap = document.querySelector(\"ul.commentwrap\");\n                    window.scrollTo({\n                        top: commentwrap && (commentwrap.getBoundingClientRect().top + window.pageYOffset - commentwrap.clientTop - 200),\n                        behavior: \"smooth\"\n                    });\n                }\n            }\n            _xhr.send();\n        }\n    });\n}\nfunction sm() {\n    let sm = document.getElementsByClassName('sm'),\n        cm = document.querySelector(\".comments-main\");\n    if (!sm.length) return;\n    if (cm) {\n        cm.addEventListener(\"click\", function (e) {\n            if (e.target.classList.contains(\"comment-reply-link\")) {\n                e.preventDefault();\n                e.stopPropagation();\n                let data_commentid = e.target.getAttribute(\"data-commentid\");\n                addComment.moveForm(\"comment-\" + data_commentid, data_commentid, \"respond\", this.getAttribute(\"data-postid\"));\n            }\n        })\n        cm.addEventListener(\"click\", (e) => {\n            let list = e.target.parentNode;\n            if (list.classList.contains(\"sm\")) {\n                let msg = __(\"\");\n                if (confirm(msg) == true) {\n                    if (list.classList.contains('private_now')) {\n                        alert(__(''));\n                        return false;\n                    } else {\n                        list.classList.add('private_now');\n                        let idp = list.getAttribute(\"data-idp\"),\n                            actionp = list.getAttribute(\"data-actionp\"),\n                            rateHolderp = list.getElementsByClassName('has_set_private')[0];\n                        let ajax_data = \"action=siren_private&p_id=\" + idp + \"&p_action=\" + actionp;\n                        let request = new XMLHttpRequest();\n                        request.onreadystatechange = function () {\n                            if (this.readyState == 4 && this.status == 200) {\n                                rateHolderp.innerHTML = request.responseText;\n                            }\n                        };\n                        request.open('POST', _iro.ajaxurl, true);\n                        request.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n                        request.send(ajax_data);\n                        return false;\n                    }\n                }\n            }\n        })\n    }\n}\nfunction throttling(fn, wait, maxTimelong) {\n    let timeout = null,\n        startTime = Date.parse(new Date);\n    return function () {\n        if (timeout !== null) clearTimeout(timeout);\n        let curTime = Date.parse(new Date);\n        if (curTime - startTime >= maxTimelong) {\n            fn();\n            startTime = curTime;\n        } else {\n            timeout = setTimeout(fn, wait);\n        }\n    }\n}\nfunction resizeTOC() {\n    const toc_container = document.querySelector(\".toc-container\"),\n        sc = document.querySelector(\".site-content\")\n    if (toc_container && sc) {\n        const resize = () => {\n            toc_container.style.height = Math.min(sc.getBoundingClientRect()[\"height\"], document.documentElement.offsetHeight - toc_container.offsetTop) + \"px\";\n        }\n        resize()\n        //TODO:\n        window.addEventListener('resize', debounce(resize), { passive: true })\n        document.addEventListener('scroll', throttling(resize, 200, 1000))\n    }\n}\nfunction tableOfContentScroll(flag) {\n    let tocContainer = document.getElementsByClassName(\"toc-container\")[0];\n    let hasToc = document.querySelector(\"div.have-toc\") || document.querySelector(\"div.has-toc\");\n    if (!hasToc) {\n        if (tocContainer) {\n            tocContainer.style.display = \"none\";\n        }\n        document.dispatchEvent(new CustomEvent(\"tocEvent\", { detail: false }))\n    } else {\n        if (tocContainer) {\n            tocContainer.style.display = \"\";\n        }\n        if (flag && document.getElementsByClassName('toc').length > 0) {\n            import('tocbot').then(({ default: tocbot }) => {\n                tocbot.init({\n                    tocSelector: '#main-container .toc',\n                    contentSelector: ['.entry-content', '.links'],\n                    headingSelector: 'h1,h2,h3,h4,h5',\n                    headingsOffset: heading_fix - window.innerHeight / 2,\n                    onClick: null\n                });\n            })\n            const heading_fix = _iro.entry_content_style == \"sakurairo\" ? (document.querySelector(\"article.type-post\") ? (document.querySelector(\"div.pattern-attachment\") ? -75 : 200) : 375) : window.innerHeight / 2;\n            const _els = document.querySelectorAll('.entry-content,.links');\n            const idSet = new Set()\n            let id = 1\n            for (let i = 0; i < _els.length; i++) {\n                let _el = _els[i].querySelectorAll('h1,h2,h3,h4,h5');\n                for (const title of _el) {\n                    const validId = generateValidId(title.innerText, idSet, id);\n                    if (idSet.has(validId)) {\n                        title.id = \"toc-head-\" + id++;\n                    } else {\n                        title.id = validId;\n                        idSet.add(validId);\n                    }\n                }\n            }\n        }\n        document.dispatchEvent(new CustomEvent(\"tocEvent\", { detail: true }))\n    }\n}\n\n//id\nfunction generateValidId(text, idSet, index) {\n    //  -\n    let newId = text.trim().replace(/\\s+/g, '-');\n    // \n    newId = newId.replace(/[^\\w\\-]/g, '');\n    // \n    if (!newId) {\n        newId = \"heading-\" + index;\n    }\n    // \n    while (idSet.has(newId)) {\n        newId += \"-\" + index;\n    }\n    idSet.add(newId);\n    return newId;\n}\n/**\n * \n */\nfunction attach_image() {\n    let cached = document.getElementsByClassName(\"insert-image-tips\")[0],\n        upload_img = document.getElementById('upload-img-file');\n    if (!upload_img) return;\n    upload_img.addEventListener(\"change\", (function () {\n        if (this.files.length > 10) {\n            createButterbar(__(\"10\"));\n            return 0;\n        }\n        for (let i = 0; i < this.files.length; i++) {\n            let max_size = _iro.img_upload_max_size || 5;\n            if (this.files[i].size >= max_size *1024 *1024) {\n                let alerts = `The maximum upload size for images is${max_size} MB\\n\\n${this.files[i].name}\\n\\nThis image is too large~ Please upload it again!`;\n                switch (_iro.language) {\n                    case \"zh_CN\":\n                        alerts = `${max_size} MB\\n\\n${this.files[i].name}\\n\\n~`;\n                        break;\n                    case \"zh_TW\":\n                        alerts = `${max_size} MB\\n\\n${this.files[i].name}\\n\\n~`;\n                        break;\n                    case \"ja\":\n                        alerts = `${max_size} MB\\n\\n${this.files[i].name}\\n\\n`;\n                        break;\n                    case \"fr\":\n                        alerts = `La taille maximale de tlchargement des images est de ${max_size} Mo\\n\\n ${this.files[i].name} \\n\\nCette image est trop volumineuse ~ Veuillez la tlcharger  nouveau !`;\n                        break;\n                }\n                alert(alerts);\n                return;\n            }\n        }\n        for (let i = 0; i < this.files.length; i++) {\n            let f = this.files[i],\n                formData = new FormData(),\n                xhr = new XMLHttpRequest();\n            formData.append('cmt_img_file', f);\n            xhr.addEventListener('loadstart', function () {\n                cached.innerHTML = '<i class=\"fa-solid fa-circle-notch fa-spin\"></i>';\n                createButterbar(__(\"...\"));\n            });\n            xhr.open(\"POST\", buildAPI(_iro.api + 'sakura/v1/image/upload'), true);\n            xhr.send(formData);\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 304)) {\n                    cached.innerHTML = '<i class=\"fa-solid fa-check\"></i>';\n                    setTimeout(function () {\n                        cached.innerHTML = '<i class=\"fa-regular fa-image\"></i>';\n                    }, 1000);\n                    let res = JSON.parse(xhr.responseText);\n                    if (res.status == 200) {\n                        let get_the_url = res.proxy;\n                        document.getElementById(\"upload-img-show\").insertAdjacentHTML('afterend', '<img class=\"lazyload upload-image-preview\" src=\"' + _iro.loading_ph + '\" data-src=\"' + get_the_url + '\" onclick=\"window.open(\\'' + get_the_url + '\\')\" onerror=\"imgError(this)\" />');\n                        lazyload();\n                        createButterbar(__(\"~\"));\n                        grin(get_the_url, type = 'Img');\n                    } else {\n                        createButterbar(_$('\\n: {0}\\ncode: {1}\\n{2}', f.name, res.status, res.message), 3000)\n                    }\n                } else if (xhr.readyState == 4) {\n                    cached.innerHTML = '<i class=\"fa-regular fa-clock\" aria-hidden=\"true\" style=\"color:red\"></i>';\n                    alert(__(\".\"));\n                    setTimeout(function () {\n                        cached.innerHTML = '<i class=\"fa-regular fa-image\"></i>';\n                    }, 1000);\n                }\n            }\n        }\n    }));\n}\n\n/**\n * \n */\nfunction add_upload_tips() {\n    const form_submit = document.querySelector('.form-submit #submit');\n    if (form_submit == null) return;\n    if (!_iro.comment_upload_img) {\n        return\n    }\n    attach_image();\n\n    const file_submit = document.getElementById('upload-img-file'),\n        hover = document.getElementsByClassName('insert-image-tips')[0],\n        Tip = document.getElementById('uploadTipPopup');\n    if (!file_submit) return;\n    file_submit.addEventListener(\"mouseenter\", function () {\n        hover.classList.toggle('insert-image-tips-hover');\n        Tip.classList.toggle('show');\n    });\n    file_submit.addEventListener(\"mouseleave\", function () {\n        hover.classList.toggle('insert-image-tips-hover');\n        Tip.classList.toggle('show');\n    });\n}\nfunction addComtListener() {\n    document.querySelectorAll(\".comt-addsmilies\").forEach((e) => {\n        e.addEventListener(\"click\", () => {\n            if (e.stlye.display == \"block\") {\n                e.style.display = \"none\";\n            } else {\n                e.style.display = \"block\";\n            }\n        })\n    })\n    document.querySelectorAll(\".comt-smilies a\").forEach((e) => {\n        e.addEventListener(\"click\", () => {\n            e.parentNode.style.display = \"none\";\n        })\n    })\n}\nfunction afterAjaxCommentComplete() {\n    lazyload();\n    code_highlight_style();\n    click_to_view_image();\n    clean_upload_images();\n}\n\n// #region LifeCycle\nfunction whilePopstate() {\n    article_attach()\n    sm()\n}\nfunction whileReady() {\n    article_attach()\n    XCS()\n    XCP()\n    getqqinfo()\n    add_upload_tips()\n    ghcardTheme()\n}\nfunction whilePjaxComplete() {\n    try {\n        add_upload_tips()\n        article_attach()\n        LoadNextPage();\n        tableOfContentScroll(true);\n        click_to_view_image()\n        getqqinfo()\n        sm()\n        original_emoji_click()\n        code_highlight_style()\n        prepareEmoji()\n        XCS()\n        resizeTOC()\n        initAnnotations();\n        apply_post_theme_color();\n        initLinkSubmission();\n        init_steamCard();\n        initTimeArchive();\n    } catch (e) {\n        console.warn(e)\n    }\n}\nfunction whileLoaded() {\n    window.addEventListener('popstate', whilePopstate)\n    click_to_view_image()\n    code_highlight_style()\n    LoadNextPage();\n    sm()\n    original_emoji_click()\n    prepareEmoji()\n    tableOfContentScroll(true);\n    addComtListener()\n    resizeTOC()\n    initAnnotations();\n    apply_post_theme_color();\n    document.addEventListener('ajax_comment_complete', afterAjaxCommentComplete)\n    initLinkSubmission();\n    init_steamCard();\n    initTimeArchive();\n    bili_fav_init();\n    init_comment_captcha();\n}\nwhileLoaded()\ndocument.addEventListener('pjax:complete', whilePjaxComplete)\nready(whileReady)\n//#endregion","// Corresponds to 10 frames at 60 Hz.\n// A few bytes payload overhead when lodash/debounce is ~3 kB and debounce ~300 B.\nexport default function debounce(func, wait = 166) {\n  let timeout;\n  function debounced(...args) {\n    const later = () => {\n      // @ts-ignore\n      func.apply(this, args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  }\n  debounced.clear = () => {\n    clearTimeout(timeout);\n  };\n  return debounced;\n}","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","function grin(tag, type, before, after) {\n    const myField = document.getElementById('comment');\n    if (!myField || myField.type != 'textarea') {\n        return false;\n    }\n    switch (type) {\n        case \"custom\": tag = before + tag + after; break;\n        case \"Img\": tag = '[img]' + tag + '[/img]'; break;\n        case \"Math\": tag = ' {{' + tag + '}} '; break;\n        case \"tieba\": tag = ' ::' + tag + ':: '; break;\n        default: tag = ' :' + tag + ': ';\n    }\n/*     if (document.selection) {\n        myField.focus();\n        const sel = document.selection.createRange();\n        sel.text = tag;\n        myField.focus();\n    } else */ if (myField.selectionStart || myField.selectionStart == '0') {\n        let startPos = myField.selectionStart,\n            endPos = myField.selectionEnd,\n            cursorPos = endPos;\n        myField.value = myField.value.substring(0, startPos) + tag + myField.value.substring(endPos, myField.value.length);\n        cursorPos += tag.length;\n        myField.focus();\n        myField.selectionStart = cursorPos;\n        myField.selectionEnd = cursorPos;\n    } else {\n        myField.value += tag;\n        myField.focus();\n    }\n}\nwindow.grin = grin\n","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message) && message.constructor !== Uint8Array)\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n"],"names":["lightBoxCSS","article_attach","collapseButtons","document","getElementsByClassName","length","collapseListener","e","slideToggle","currentTarget","nextElementSibling","ele","addEventListener","collapse","async","_iro","baguetteBox","loadCSS","resolvePath","default","run","captions","element","getElementsByTagName","alt","ignoreClass","fancybox","window","jQuery","Function","$","ext_shared_lib","importExternal","lightGallery","initLightGallery","lightbox","theme_mathjax","querySelector","textContent","match","mathjaxConfig","tex","inlineMath","startup","typeset","chtml","fontURL","mathmlSpacing","MathJax","typesetPromise","math","get_gravatar","email","size","gravatar_url","MD5","getqqinfo","is_get_by_qq","i_author","i_qq","i_email","i_url","qq_check","gravatar_check","user_avatar_img","localStorage","getItem","value","setAttribute","qzone_autocomplete","style","display","emailAddressFlag","qq","test","whileFailed","setItem","fetch","buildAPI","qq_api_url","then","resp","ok","data","json","name","trim","avatar","console","warn","emailAddress","URL_Address","user_name","AddComment","respondId","moveForm","commId","parentId","comm","getElementById","respond","cancel","parent","this","div","createElement","id","parentNode","insertBefore","nextSibling","temp","remove","_respond","scrollTo","top","getBoundingClientRect","pageYOffset","clientTop","behavior","onclick","t","focus","PaginationListener","target","preventDefault","stopPropagation","classList","contains","add","dataset","href","nonce","method","res","Error","status","insertAdjacentHTML","lazyload","catch","error","createButterbar","innerHTML","LoadNextPage","sections","_flag","i","prepareEmoji","emojiPanelButton","emojiPanel","header","commentTextArea","removeEventListener","closeEmojiPanel","moveDrag","endDrag","startDrag","initFooter","getAttribute","btnRect","panelWidth","offsetWidth","panelHeight","offsetHeight","leftPos","left","scrollX","width","getComputedStyle","position","topPos","bottom","innerHeight","toggle","hasAttribute","passive","initEmojiPanel","offsetX","offsetY","isDragging","event","touches","clientX","offsetLeft","clientY","offsetTop","transition","row","tagName","querySelectorAll","className","container","initAnnotations","popup","body","appendChild","createAnnotationPopup","have_annotation","page_annotation","JSON","parse","Object","keys","annotationMarks","processedTerms","Set","forEach","mark","term","has","explanation","rect","closest","i18n_form","sakura_links","submitting","server_error","connection_error","timeout_error","invalid_url","invalid_email","security_error","captcha_load_error","refresh_captcha","currentLang","language","documentElement","lang","replace","includes","initLinkSubmission","i18n","submitButton","linkModal","closeButton","linkForm","captchaImg","patternTitle","handleModalOpen","overflow","loadCaptcha","handleModalClose","enableScroll","handleOutsideClick","overflowY","cleanup","handleFormSubmit","isSubmitting","submissionTimeout","submissionLock","log","Promise","resolve","setTimeout","clearTimeout","siteName","siteUrl","siteDescription","siteImage","contactEmail","captcha","timestampInput","idInput","nonceInput","displayStatus","siteUrlValue","urlPattern","siteImageValue","xssPattern","validateForm","disabled","formData","FormData","append","ajaxUrl","ajaxurl","fetchPromise","credentials","timeoutPromise","_","reject","response","race","text","success","message","reset","captchaInput","src","endpointUrl","captcha_endpoint","timestamp","Date","now","endpoint","cache","headers","responseText","undefined","code","msg","time","String","type","statusElement","_statusUpdateTimeout","sanitizedMessage","c","defaultStyles","profile","minWidth","margin","background","borderBottom","padding","username","fontSize","height","init_steamCard","applySteamProfileStyles","resize_SteamCard","gameInfo","profileHeader","init","resizeTimer","resizeCard","checkDark","dark","ghcardDark","ifDarkmodeShouldOn","darkmode","turn","cards","ghcard","card","URL","searchParams","set","toString","delete","Timeline","constructor","timelineRoot","modalMask","modalContent","modalClose","boundHandleClick","handleClick","bind","boundHandleModalClose","boundHandleMaskClick","handleMaskClick","htmlLang","toLowerCase","some","variant","startsWith","categoryRoot","modalMain","contentAPI","archiveapi","contents","timelineInstance","FetchContents","bindEvents","retryError","destroy","matches","yearCard","year","yearData","filterByYear","renderModal","showModal","categoryCard","catId","parseInt","categoryid","categoryData","filterByCategory","close","result","months","entries","month","posts","matched","filter","post","Array","isArray","categories","label","totalStats","views","words","comments","typeStats","shuoshuo","article","values","monthObj","meta","comment_count","yearOverview","categoryOverview","articleCount","articles","readCount","times","wordCount","characters","commentCount","html","toFixNum","monthsDesc","sort","a","b","monthsObj","monthTitle","slice","post_date","date","formattedDate","getMonth","getDate","postType","link","post_title","initTimeArchive","num","toFixed","visibilityHandler","scrollHandler","videoClickHandler","appClickHandler","appObserverInstance","imgObserverInstance","videoContainer","isInitialized","isAdmin","app","disconnect","initBilibiliFavList","restApiUrl","iro_api","wpnonce","state","folders","currentFolder","loading","pageSize","currentItems","currentPage","totalPages","lastDataUpdate","fromCache","cacheExpiresIn","cacheAge","Map","getKey","folderId","page","key","lsKey","stringify","get","item","savedData","parsed","removeItem","isValid","cachedItem","initApp","fetchAllFolders","renderApp","setupScrollEffects","setupImageLazyLoading","setupVideoModal","setupVideoItemsClickEvent","setupScrollAnimations","showError","forceRefresh","fetchFolderItems","url","Pragma","list","cachedData","folderData","medias","Math","ceil","info","media_count","floor","fetchFolderItemsFromNetwork","cache_info","from_cache","expires_in","isUpdate","folderSelectorHtml","renderFolderSelector","contentHtml","renderLoadingSkeleton","renderCurrentFolder","existingContent","wasSkeleton","renderNewContent","bindAppContainerEvents","index","transitionDelay","requestAnimationFrame","itemsToExit","totalExitDuration","waitTimeForNewContent","max","EXIT_STAGGER_DELAY","skeletonHtml","refreshButtonHtml","map","folder","title","join","find","renderFavItem","renderPagination","bvid","cover","upper","intro","paginationHtml","startPage","maxPagesToShow","endPage","min","refreshBtn","lastRefreshTs","remainingTime","refreshTextSpan","currentBtn","currentTextSpan","currentRefreshBtn","tabEl","pageBtn","scrollToTop","bindGlobalEvents","lastVisibilityChange","needReloadOnReturn","visibilityState","timeAway","contentArea","itemObserver","IntersectionObserver","entry","isIntersecting","unobserve","threshold","rootMargin","animationDelay","observe","appMutationCallback","mutationsList","mutation","addedNodes","node","nodeType","img","debounce","func","wait","timeout","args","apply","items","viewportHeight","observer","obs","placeholder","previousElementSibling","onload","onerror","imgError","removeAttribute","closeVideoModal","iframe","transform","opacity","handleFavItemClick","favItem","upName","MutationObserver","childList","subtree","init_comment_captcha","captchaHideTimeout","captchaField","refreshCaptcha","showCaptcha","hideCaptcha","loaded","marginRight","iroCaptcha","cfturnstile","theme","loadTurnstile","script","head","turnstile","render","sitekey","callback","token","cfts","apply_post_theme_color","post_theme_color","setProperty","removeProperty","click_to_view_image","open","original_emoji_click","grin","innerText","XCS","__list","form","statusSubmitting","butterBarRef","__","attributes","from","addComment","order","formpostion","dispatchEvent","CustomEvent","statusText","reason","finally","sm","cm","data_commentid","confirm","alert","idp","actionp","rateHolderp","ajax_data","request","XMLHttpRequest","onreadystatechange","readyState","setRequestHeader","send","resizeTOC","toc_container","sc","resize","debounced","clear","fn","maxTimelong","startTime","curTime","throttling","tableOfContentScroll","flag","tocContainer","tocbot","tocSelector","contentSelector","headingSelector","headingsOffset","heading_fix","onClick","entry_content_style","_els","idSet","_el","validId","generateValidId","detail","newId","add_upload_tips","comment_upload_img","cached","upload_img","files","max_size","img_upload_max_size","alerts","f","xhr","api","get_the_url","proxy","loading_ph","_$","attach_image","file_submit","hover","Tip","afterAjaxCommentComplete","code_highlight_style","whilePopstate","stlye","is_admin","bili_fav_init","ready","nodeName","_this","path","pathname","_xhr","responseType","onloadstart","comments_navi","commentwrap","loading_comments","comments_list","nextlink","outerHTML","gtag","google_analytics_id","charenc","utf8","stringToBytes","str","bin","unescape","encodeURIComponent","bytesToString","bytes","decodeURIComponent","escape","push","charCodeAt","fromCharCode","module","exports","isBuffer","obj","readFloatLE","isSlowBuffer","_isBuffer","tag","before","after","myField","selectionStart","startPos","endPos","selectionEnd","cursorPos","substring","crypt","md5","options","encoding","prototype","call","Uint8Array","m","bytesToWords","l","d","FF","_ff","GG","_gg","HH","_hh","II","_ii","aa","bb","cc","dd","endian","x","s","n","_blocksize","_digestsize","digestbytes","wordsToBytes","asBytes","asString","bytesToHex","base64map","rotl","rotr","Number","randomBytes","random","hex","hexToBytes","substr","bytesToBase64","base64","triplet","j","charAt","base64ToBytes","imod4","indexOf","pow"],"sourceRoot":""}